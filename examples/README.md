# Примеры использования ThermoSystem v2.1

## Обзор

Этот каталог содержит примеры использования новой системы термодинамических расчётов с интеллектуальной маршрутизацией запросов.

## Структура

- `compound_data_example.py` — Запросы данных по веществам
- `reaction_calculation_example.py` — Расчёт термодинамики реакций
- `custom_temperature_step.py` — Использование кастомного шага температуры

## Запуск примеров

### Подготовка окружения

```bash
# Активировать виртуальное окружение
uv shell

# или
.venv\Scripts\Activate.ps1  # Windows
source .venv/bin/activate  # Linux/Mac
```

### Запуск примеров

```bash
# Запуск примера данных по веществу
python examples/compound_data_example.py

# Запуск примера расчёта реакции
python examples/reaction_calculation_example.py

# Запуск примера с кастомным шагом
python examples/custom_temperature_step.py
```

## Описание примеров

### 1. Compound Data Example (`compound_data_example.py`)

Демонстрирует обработку запросов данных по отдельным веществам:

- Базовый запрос таблицы для H2O
- Запрос с кастомным шагом для WCl6
- Обработка ошибок для неизвестных веществ

**Вывод включает:**
- Базовые свойства вещества
- Термодинамическую таблицу с configurable шагом
- Профессиональное форматирование через tabulate

### 2. Reaction Calculation Example (`reaction_calculation_example.py`)

Демонстрирует термодинамический анализ химических реакций:

- Хлорирование вольфрама (2 W + 4 Cl2 + O2 → 2 WOCl4)
- Образование воды (2 H2 + O2 → 2 H2O)
- Обработка сложных реакций

**Вывод включает:**
- Уравнение реакции с Unicode символами
- Метод расчёта с математическими формулами
- Таблицу результатов ΔH°, ΔS°, ΔG°
- Анализ спонтанности реакции

### 3. Custom Temperature Step (`custom_temperature_step.py`)

Демонстрирует влияние шага температуры на детализацию результатов:

- Сравнение шагов 25K, 50K, 100K, 150K
- Визуализация различий в количестве точек данных
- Рекомендации по выбору оптимального шага

**Шаги температуры:**
- 25K: Максимальная детализация (использовать для фазовых переходов)
- 50K: Хорошая детализация (использовать для анализа)
- 100K: Стандартная детализация (использовать по умолчанию)
- 150-250K: Обзорная детализация (использовать для больших диапазонов)

## Mock данные

Примеры используют mock LLM клиент для демонстрации без необходимости подключения к реальному API. В реальном использовании необходимо:

1. Настроить переменные окружения в `.env`:
   ```
   OPENROUTER_API_KEY=your_api_key
   LLM_BASE_URL=https://openrouter.ai/api/v1
   LLM_DEFAULT_MODEL=openai/gpt-4o
   ```

2. Заменить mock агент на реальный:
   ```python
   from thermo_agents.thermodynamic_agent import ThermodynamicAgent

   agent = ThermodynamicAgent(config)
   ```

## Особенности вывода

### Unicode форматирование
- Химические формулы: H₂O, CO₂, CH₄
- Стрелки реакций: → (необратимые), ⇄ (обратимые)
- Математические символы: Δ, ∫, °, superscript/subscript

### Табличное представление
- Использование библиотеки `tabulate`
- Формат `grid` для чётких границ
- Автоматическое выравнивание колонок

### Температурные зависимости
- Расчёт Cp(T), H(T), S(T), G(T)
- Численное интегрирование по формулам Шомейта
- Кеширование для производительности

## Расширение примеров

Вы можете создавать собственные примеры, используя шаблон:

```python
import asyncio
from thermo_agents.orchestrator import Orchestrator

async def main():
    # Инициализация оркестратора
    orchestrator = Orchestrator(...)

    # Ваш запрос
    query = "Ваш термодинамический запрос"

    # Обработка
    result = await orchestrator.process_query(query)
    print(result)

if __name__ == "__main__":
    asyncio.run(main())
```

## Поддерживаемые типы запросов

### Данные веществ
- "Дай таблицу для [формула] при [T_min]-[T_max]K"
- "Свойства [формула] с шагом [N] градусов"
- "[формула](фаза) при [диапазон]"

### Реакции
- "[уравнение] при [диапазон]"
- "Рассчитай термодинамику [описание]"
- "[реагенты] → [продукты] с шагом [N]K"

## Устранение неполадок

### База данных не найдена
```
❌ База данных не найдена: data/thermo_data.db
```
Убедитесь, что файл базы данных существует в правильном каталоге.

### Ошибки импорта
```
ModuleNotFoundError: No module named 'thermo_agents'
```
Проверьте PYTHONPATH или запускайте из корневого каталога проекта.

### Ошибки зависимостей
```
ImportError: cannot import name 'ThermodynamicCalculator'
```
Запустите `uv sync` для установки всех зависимостей.

## Дополнительные ресурсы

- [Руководство пользователя](../docs/user_guide.md)
- [API Reference](../docs/api_reference.md)
- [Архитектура системы](../docs/ARCHITECTURE_V2.md)
- [Тесты](../tests/) - дополнительные примеры использования