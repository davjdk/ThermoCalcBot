# –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ** –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–æ—Ç–∏–≤ —É—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∞–∫—Ü–∏–∏.

## –ü—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–≥–æ SQL-—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (`Formula LIKE 'Mg%'`), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ö–∏–º–∏—á–µ—Å–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º:

- –ó–∞–ø—Ä–æ—Å `Mg` ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç `MgI(g)` (–π–æ–¥–∏–¥ –º–∞–≥–Ω–∏—è) –≤–º–µ—Å—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–≥–æ `Mg`
- –ó–∞–ø—Ä–æ—Å `Ti` ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç `Ti(-g)` (–∏–æ–Ω —Ç–∏—Ç–∞–Ω–∞) –≤–º–µ—Å—Ç–æ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ `Ti`

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:** `logs/sessions/session_20251016_121440.log`

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–í–≤–µ–¥–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ **`ReactionValidator`** –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (Stage 0 –≤ FilterPipeline):

1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª** (–∂—ë—Å—Ç–∫–∞—è, 70% –≤–µ—Å) - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ö–∏–º–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—É–ª—ã
2. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π** (–º—è–≥–∫–∞—è, 30% –≤–µ—Å) - —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ IUPAC/trivial names –∏–∑ LLM —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ LLM** - –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–µ –æ—Ç—Å–µ–∫–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Ç–æ–ª—å–∫–æ –ø–æ–≤—ã—à–∞—é—Ç confidence

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                         | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                        | –¢–∏–ø         |
| --------------------------------- | ------------------------------------------------ | ----------- |
| `models/extraction.py`            | –î–æ–±–∞–≤–∏—Ç—å `compound_names: Dict[str, List[str]]`  | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `thermodynamic_agent.py`          | –†–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –≤–µ—â–µ—Å—Ç–≤ | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `filtering/reaction_validator.py` | **–ù–æ–≤—ã–π –º–æ–¥—É–ª—å** –≤–∞–ª–∏–¥–∞—Ü–∏–∏                       | –°–æ–∑–¥–∞–Ω–∏–µ    |
| `filtering/filter_pipeline.py`    | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ReactionValidator –∫–∞–∫ Stage 0         | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `orchestrator.py`                 | –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ–∞–∫—Ü–∏–∏ –≤ pipeline           | –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è |

## –î–µ—Ç–∞–ª–∏ –¢–ó

üìÑ **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/specs/tz_compound_validation.md`

**–í–∫–ª—é—á–∞–µ—Ç:**
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –∏–∑ –ª–æ–≥–æ–≤
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (FR-1 –¥–æ FR-7)
- ‚úÖ –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (NFR-1 –¥–æ NFR-4)
- ‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—É—é —Å—Ö–µ–º—É –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –≤–µ—â–µ—Å—Ç–≤ (—Ä–∞–∑–¥–µ–ª 5)
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –º—è–≥–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (70% —Ñ–æ—Ä–º—É–ª–∞ + 30% –Ω–∞–∑–≤–∞–Ω–∏–µ)
- ‚úÖ 7 –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∫–µ–π—Å–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –ø—Å–µ–≤–¥–æ–∫–æ–¥–æ–º
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º fuzzy matching –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π
- ‚úÖ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (4 —ç—Ç–∞–ø–∞, 7-11 –¥–Ω–µ–π)
- ‚úÖ 8 –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø—Ä–∏—ë–º–∫–∏
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üéØ –ú—è–≥–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º

```python
# –ö–µ–π—Å: LLM –æ—à–∏–±—Å—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏, –Ω–æ —Ñ–æ—Ä–º—É–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
Input: formula="Ti", llm_names=["Titan metal"]  # ‚ùå –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è
Found: {"Formula": "Ti(s)", "FirstName": "Titanium"}

Validation:
  - formula_match = 1.0 (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
  - name_match = 0.4 (–Ω–∏–∑–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
  - confidence = 0.7*1.0 + 0.3*0.4 = 0.82 ‚úÖ

‚Üí –í—ã–±—Ä–∞–Ω–æ Ti(s) - –æ—à–∏–±–∫–∞ LLM –Ω–µ –ø–æ–º–µ—à–∞–ª–∞!
```

### üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ï—Å–ª–∏ LLM –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –Ω–∞–∑–≤–∞–Ω–∏—è (`compound_names=[]`), —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º:

```python
confidence = 0.7*1.0 + 0.3*0.0 = 0.70 ‚úÖ
```

### üìä –†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å –∫ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏—è–º

```python
llm_names=["Titanium(IV) fluoride", "Titanium tetrafluoride"]
# –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç –æ–±–∞ –∏ –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à–µ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- **AC-1:** –¢–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã (TiF4, Mg) –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (MgI, MgBr2)
- **AC-2:** –†–∞–∑–ª–∏—á–µ–Ω–∏–µ —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö
- **AC-3:** ThermodynamicAgent –∏–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –≤ ‚â•80% —Å–ª—É—á–∞–µ–≤
- **AC-4:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –ø–æ–≤—ã—à–∞–µ—Ç confidence, –Ω–æ –ù–ï –æ—Ç—Å–µ–∫–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö LLM
- **AC-5:** –ü–æ–∫—Ä—ã—Ç–∏–µ unit-—Ç–µ—Å—Ç–∞–º–∏ ‚â• 90%
- **AC-6:** Integration-—Ç–µ—Å—Ç—ã –¥–ª—è 5+ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
- **AC-7:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 5%
- **AC-8:** –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ñ–æ—Ä–º—É–ª—ã + –Ω–∞–∑–≤–∞–Ω–∏—è + confidence scores

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¢–ó:

1. ‚è≠Ô∏è –°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π TODO-—Å–ø–∏—Å–æ–∫ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
2. ‚è≠Ô∏è –ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Å —ç—Ç–∞–ø–∞ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –¥–Ω—è)
3. ‚è≠Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ —ç—Ç–∞–ø—É 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (3-5 –¥–Ω–µ–π)

## –¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è

- [x] üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- [ ] ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] üí• Breaking change

## –ß–µ–∫-–ª–∏—Å—Ç

- [x] –î–æ–∫—É–º–µ–Ω—Ç —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¢–ó
- [x] –ü—Ä–æ–±–ª–µ–º–∞ –æ–ø–∏—Å–∞–Ω–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º
- [x] –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏
- [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–∏—Å–∫–∏ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- [x] –£–∫–∞–∑–∞–Ω—ã —ç—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ issue/PR

- –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤: `logs/sessions/session_20251016_121440.log`
- –ë–∞–∑–æ–≤–∞—è –≤–µ—Ç–∫–∞: `feature/comprehensive-logging`

---

**–ü—Ä–æ—Å—å–±–∞ –∫ —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç—É:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- –û—Ü–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å —Å—Ä–æ–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (7-11 –¥–Ω–µ–π)
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ –º—è–≥–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
