"""Константы для фильтрации термодинамических данных.

Этот модуль содержит все магические числа и пороги, которые используются
в процессе фильтрации и анализа данных, чтобы избежать хардкодинга
в основной логике.

Пример использования:
    from .constants import SOLID_PHASE_MAX_TEMP, RELIABILITY_CLASS_EXCELLENT

    if temperature < SOLID_PHASE_MAX_TEMP:
        phase = 's'

    if reliability_class == RELIABILITY_CLASS_EXCELLENT:
        # Высший класс надежности данных
        pass
"""

from typing import Final

# =============================================================================
# ТЕМПЕРАТУРНЫЕ ПОРОГИ ДЛЯ ФАЗОВЫХ ОЦЕНОК (в Кельвинах)
# =============================================================================

# Температурные пороги для определения фазы (K)
SOLID_PHASE_MAX_TEMP: Final[float] = 200.0  # Максимальная температура для твердой фазы
LIQUID_PHASE_MIN_TEMP: Final[float] = 273.15  # Температура замерзания воды (0°C)
LIQUID_PHASE_MAX_TEMP: Final[float] = 373.15  # Температура кипения воды (100°C)
GAS_PHASE_MIN_TEMP: Final[float] = 1500.0  # Минимальная температура для газообразной фазы

# Экстремальные пороги для проверки
EXTREMELY_LOW_TEMP: Final[float] = 0.0    # Абсолютный минимум (0K)
EXTREMELY_HIGH_TEMP: Final[float] = 10000.0  # Абсолютный максимум

# =============================================================================
# ПОРОГИ ДЛЯ ФАЗОВЫХ ПЕРЕХОДОВ
# =============================================================================

# Температуры фазовых переходов для типичных веществ (K)
WATER_MELTING_POINT: Final[float] = 273.15    # Точка плавления воды
WATER_BOILING_POINT: Final[float] = 373.15   # Точка кипения воды

# Общие пороги для фазовых переходов
MELTING_POINT_MAX: Final[float] = 400.0      # Максимальная точка плавления
BOILING_POINT_MIN: Final[float] = 600.0     # Минимальная точка кипения

# =============================================================================
# ПОРОГИ ДЛЯ ОЦЕНКИ НАДЕЖНОСТИ
# =============================================================================

# Классы надёжности данных (1-3, где 1 - самый надёжный)
RELIABILITY_CLASS_EXCELLENT: Final[int] = 1
RELIABILITY_CLASS_GOOD: Final[int] = 2
RELIABILITY_CLASS_FAIR: Final[int] = 3
MAX_RELIABILITY_CLASS: Final[int] = 3  # Максимальный допустимый класс

# =============================================================================
# ПОРОГИ ДЛЯ ТЕМПЕРАТУРНОГО ПОКРЫТИЯ
# =============================================================================

# Минимальная доля покрытия температурного диапазона
MIN_TEMPERATURE_COVERAGE_RATIO: Final[float] = 0.5  # 50% покрытие необходимо

# Значения для расширения температурных диапазонов при фазовых переходах
TEMPERATURE_EXTENSION_MARGIN: Final[float] = 50.0  # 50K добавляется при переходах

# =============================================================================
# ПОРОГИ ДЛЯ SCORING ВЕСА
# =============================================================================

# Веса для расчета composite score в фильтрации
DEFAULT_RELIABILITY_WEIGHT: Final[float] = 0.6    # Вес надёжности (60%)
DEFAULT_COVERAGE_WEIGHT: Final[float] = 0.4      # Вес покрытия (40%)

# Максимальные значения для нормализации scores
MAX_SCORE: Final[float] = 1.0
MIN_SCORE: Final[float] = 0.0

# =============================================================================
# ПОРОГИ ДЛЯ FALLBACK СТРАТЕГИЙ
# =============================================================================

# Количество записей для возврата в fallback режиме
FALLBACK_TOP_RECORDS: Final[int] = 3
FALLBACK_MIN_RECORDS_THRESHOLD: Final[int] = 1

# Пороги для активации различных fallback стратегий
MIN_RECORDS_FOR_FILTERING: Final[int] = 2
MIN_RECORDS_FOR_SELECTION: Final[int] = 1

# =============================================================================
# ПОРОГИ ДЛЯ ОПЕРАЦИЙ ПОИСКА
# =============================================================================

# Значения по умолчанию
DEFAULT_QUERY_LIMIT: Final[int] = 100
MAX_QUERY_LIMIT: Final[int] = 1000
DEFAULT_TIMEOUT_SECONDS: Final[int] = 30

# Пороги для количества соединений
MAX_COMPOUNDS_PER_REQUEST: Final[int] = 10
MIN_COMPOUNDS_FOR_REACTION: Final[int] = 2

# =============================================================================
# ПОРОГИ ДЛЯ ВАЛИДАЦИИ
# =============================================================================

# Максимальная длина химической формулы
MAX_FORMULA_LENGTH: Final[int] = 100

# Проверка диапазонов температур
MIN_TEMPERATURE_K: Final[float] = 0.0
MAX_TEMPERATURE_K: Final[float] = 10000.0

# Проверка корреляции ID
MAX_CORRELATION_ID_LENGTH: Final[int] = 100

# =============================================================================
# ПОРОГИ ДЛЯ ФАЗОВЫХ СОСТОЯНИЙ
# =============================================================================

# Допустимые фазовые состояния
VALID_PHASES: Final[set[str]] = {"s", "l", "g", "aq", "cr", "am"}

# Описания фазовых состояний на русском языке
PHASE_DESCRIPTIONS: Final[dict[str, str]] = {
    "s": "твердое",
    "l": "жидкое",
    "g": "газообразное",
    "aq": "водный раствор",
    "cr": "кристаллическое",
    "am": "аморфное"
}

# Описания фазовых состояний на английском языке
PHASE_DESCRIPTIONS_EN: Final[dict[str, str]] = {
    "s": "solid",
    "l": "liquid",
    "g": "gas",
    "aq": "aqueous",
    "cr": "crystalline",
    "am": "amorphous"
}

# =============================================================================
# ПОРОГИ ДЛЯ ТИПОВ ХИМИЧЕСКИХ СОЕДИНЕНИЙ
# =============================================================================

# Пороги для определения типа соединения
COMPOUND_COMPLEXITY_SIMPLE: Final[int] = 2      # H2O, CO2, N2
COMPOUND_COMPLEXITY_MEDIUM: Final[int] = 5      # Органические молекулы
COMPOUND_COMPLEXITY_COMPLEX: Final[int] = 8     # Полимеры, большие молекулы

# Префиксы для сложных соединений
COMPLEX_COMPOUND_PREFIXES: Final[list[str]] = [
    "Li", "Na", "K", "Ca", "Mg", "Al", "Fe", "Cu", "Zn", "Ni"
]

# =============================================================================
# ПОРОГИ ДЛЯ ЛОГИРОВАНИЯ И МЕТРИК
# =============================================================================

# Уровни логирования
LOG_LEVEL_DEBUG: Final[str] = "DEBUG"
LOG_LEVEL_INFO: Final[str] = "INFO"
LOG_LEVEL_WARNING: Final[str] = "WARNING"
LOG_LEVEL_ERROR: Final[str] = "ERROR"

# Пороги для логирования медленных операций
SLOW_OPERATION_THRESHOLD_MS: Final[float] = 1000.0  # 1 секунда
VERY_SLOW_OPERATION_THRESHOLD_MS: Final[float] = 5000.0  # 5 секунд

# =============================================================================
# ПОРОГИ ДЛЯ КЭШИРОВАНИЯ
# =============================================================================

# Размеры кэшей
DEFAULT_CACHE_SIZE: Final[int] = 512
MAX_CACHE_SIZE: Final[int] = 10000

# Время жизни по умолчанию (секунды)
DEFAULT_CACHE_TTL: Final[int] = 3600  # 1 час
SHORT_CACHE_TTL: Final[int] = 300       # 5 минут
LONG_CACHE_TTL: Final[int] = 86400      # 24 часа

# =============================================================================
# ПОРОГИ ДЛЯ НАСТРОЕК ПО УМОЛЧАНИЮ
# =============================================================================

# Размеры буферов и соединений
DEFAULT_BUFFER_SIZE: Final[int] = 8192
MAX_BUFFER_SIZE: Final[int] = 65536

# Время ожидания для сетевых операций
DEFAULT_NETWORK_TIMEOUT: Final[int] = 30
LONG_NETWORK_TIMEOUT: Final[int] = 120

# Количество попыток для повторных операций
DEFAULT_RETRY_ATTEMPTS: Final[int] = 3
MAX_RETRY_ATTEMPTS: Final[int] = 10

# =============================================================================
# ПОРОГИ ДЛЯ ОПТИМИЗАЦИИ ПРОИЗВОДИТЕЛЬНОСТИ
# =============================================================================

# Размеры пулов соединений
DEFAULT_CONNECTION_POOL_SIZE: Final[int] = 1
MAX_CONNECTION_POOL_SIZE: Final[int] = 10

# Размеры пулов потоков
DEFAULT_THREAD_POOL_SIZE: Final[int] = 4
MAX_THREAD_POOL_SIZE: Final[int] = 50

# Пороги для переключения на более эффективные алгоритмы
LARGE_DATASET_THRESHOLD: Final[int] = 1000
COMPLEX_OPERATION_THRESHOLD: Final[float] = 0.1  # 100ms