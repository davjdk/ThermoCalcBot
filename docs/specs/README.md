# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ ThermoSystem

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-02  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã —Å —Ü–µ–ª—å—é —É–ø—Ä–æ—â–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏–∑ `docs/calc_example.ipynb`.

**–ö–ª—é—á–µ–≤—ã–µ —Ü–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:**

1. ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã —á–µ—Ä–µ–∑ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏
2. üéØ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π core-–ª–æ–≥–∏–∫–∏ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞
3. üìä –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. üß™ –°–æ–∑–¥–∞–Ω–∏–µ comprehensive test suite —Å regression-—Ç–µ—Å—Ç–∞–º–∏
5. ‚ö° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è YAML-–∫—ç—à–∞ –¥–ª—è 10+ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¢–ó

### üìã –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç                                                                 | –°—Ç–∞—Ç—É—Å        | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
| ------------------------------------------------------------------------ | ------------- | --------- | --------------------------------------------- |
| [refactoring_stage_01_cleanup.md](refactoring_stage_01_cleanup.md)       | üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –í–´–°–û–ö–ò–ô   | –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ø–æ—Å–ª–µ LLM response |
| [refactoring_stage_02_core_logic.md](refactoring_stage_02_core_logic.md) | üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –í–´–°–û–ö–ò–ô   | –í–Ω–µ–¥—Ä–µ–Ω–∏–µ core-–ª–æ–≥–∏–∫–∏ –∏–∑ calc_example.ipynb   |
| [refactoring_stage_03_formatting.md](refactoring_stage_03_formatting.md) | üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –í–´–°–û–ö–ò–ô   | –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º        |
| [refactoring_stage_04_testing.md](refactoring_stage_04_testing.md)       | üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è | –°–†–ï–î–ù–ò–ô   | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è                      |

### üìä –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

| –î–æ–∫—É–º–µ–Ω—Ç                                                                                         | –û–ø–∏—Å–∞–Ω–∏–µ                              |
| ------------------------------------------------------------------------------------------------ | ------------------------------------- |
| [refactoring_improvements_and_clarifications.md](refactoring_improvements_and_clarifications.md) | –ê–Ω–∞–ª–∏–∑ –¢–ó –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é |

---

## –≠—Ç–∞–ø—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –≠—Ç–∞–ø 0: –ê—É–¥–∏—Ç –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞–Ω–∞–ª–∏–∑–∞  
**–°—Ä–æ–∫:** 2-3 –¥–Ω—è  

**–ó–∞–¥–∞—á–∏:**

1. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Å–≤–µ—Ä–∫—É —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã —Å `calc_example.ipynb`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å regression-—Ç–µ—Å—Ç—ã —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞
3. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç)
4. ‚úÖ –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è vs —Ä–∞–¥–∏–∫–∞–ª—å–Ω–∞—è)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- –°–æ–∑–¥–∞–Ω –Ω–∞–±–æ—Ä —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (CSV —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞)
- –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ —Å–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–µ—Å—Ç—å/–Ω–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π)
- –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω
- –ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. [refactoring_improvements_and_clarifications.md](refactoring_improvements_and_clarifications.md)

---

### –≠—Ç–∞–ø 1: Cleanup ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏

**–°—Ç–∞—Ç—É—Å:** üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è  
**–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  

**–¶–µ–ª—å:**

–£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥–æ–≤—É—é –±–∞–∑—É, —É–¥–∞–ª–∏–≤ –∏–∑–±—ã—Ç–æ—á–Ω—É—é –∏ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —Ä–∞—Å—á–µ—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:**

1. **–£–¥–∞–ª–∏—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - `filtering/filter_pipeline.py` (5+ —Å—Ç–∞–¥–∏–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
   - `filtering/filter_stages.py` (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞–¥–∏–π)
   - `calculations/reaction_calculator.py` (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞)
   - `calculations/phase_transition_calculator.py`
   - `aggregation/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
   - `metrics/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
   - `validation/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)

2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - ‚úÖ `search/` (database_connector, sql_builder, compound_searcher)
   - ‚úÖ `storage/static_data_manager.py` + YAML-—Ñ–∞–π–ª—ã
   - ‚úÖ `models/extraction.py`, `models/search.py`, `models/static_data.py`
   - ‚úÖ `thermodynamic_agent.py` (LLM –ø–∞—Ä—Å–∏–Ω–≥)
   - ‚úÖ `session_logger.py`

3. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å `orchestrator.py`:**
   - –£–¥–∞–ª–∏—Ç—å –º–Ω–æ–≥–æ—Ñ–∞–∑–Ω—É—é –ª–æ–≥–∏–∫—É
   - –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏–Ω–≥ LLM response
   - –í–µ—Ä–Ω—É—Ç—å –∑–∞–≥–ª—É—à–∫—É –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ (–±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ —ç—Ç–∞–ø–µ 2)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- ‚úÖ –í—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ `orchestrator.py` —É–ø—Ä–æ—â–µ–Ω –¥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ `uv run main.py --test` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∑–∞–≥–ª—É—à–∫—É
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ –≤–µ—Ç–∫—É `refactor/stage-01-cleanup`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [refactoring_stage_01_cleanup.md](refactoring_stage_01_cleanup.md)

---

### –≠—Ç–∞–ø 2: Core Logic ‚Äî –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞

**–°—Ç–∞—Ç—É—Å:** üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è  
**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ 1  

**–¶–µ–ª—å:**

–í–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –æ—Ç–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π –∏–∑ –ë–î –∏ —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞ `docs/calc_example.ipynb` —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π YAML-–∫—ç—à–∞.

**–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏:**

```
src/thermo_agents/core_logic/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ compound_data_loader.py          # –¢—Ä–µ—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫: YAML ‚Üí –ë–î (—Ñ–æ—Ä–º—É–ª–∞+–∏–º—è) ‚Üí –ë–î (—Ñ–æ—Ä–º—É–ª–∞)
‚îú‚îÄ‚îÄ phase_transition_detector.py     # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MeltingPoint/BoilingPoint
‚îú‚îÄ‚îÄ record_range_builder.py          # –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π
‚îú‚îÄ‚îÄ thermodynamic_engine.py          # –†–∞—Å—á–µ—Ç Cp, H, S, G –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤–µ—â–µ—Å—Ç–≤–∞
‚îî‚îÄ‚îÄ reaction_engine.py               # –†–∞—Å—á–µ—Ç ŒîH, ŒîS, ŒîG, K –¥–ª—è —Ä–µ–∞–∫—Ü–∏–∏
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

1. **YAML-–∫—ç—à –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ü–†–ò–û–†–ò–¢–ï–¢!):**
   - `CompoundDataLoader` —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `StaticDataManager`
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è H2O, CO2, O2, NH3, Cl2, HCl, NaCl, FeO, C, CO
   - Fallback –Ω–∞ –¥–≤—É—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –ë–î, –µ—Å–ª–∏ –Ω–µ—Ç –≤ YAML

2. **–î–≤—É—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –ë–î:**
   - –°—Ç–∞–¥–∏—è 1: —Ñ–æ—Ä–º—É–ª–∞ + –∏–º—è (—Å—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ)
   - –°—Ç–∞–¥–∏—è 2: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞ (fallback)

3. **–¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π:**
   - –£—Ä–æ–≤–µ–Ω—å 1: –ó–∞–ø–∏—Å—å –æ–∂–∏–¥–∞–µ–º–æ–π —Ñ–∞–∑—ã —Å Tmin ‚âà current_T
   - –£—Ä–æ–≤–µ–Ω—å 2: –ó–∞–ø–∏—Å—å —Å >50% –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ñ–∞–∑–µ
   - –£—Ä–æ–≤–µ–Ω—å 3: –õ—é–±–∞—è –∑–∞–ø–∏—Å—å, –ø–æ–∫—Ä—ã–≤–∞—é—â–∞—è current_T

4. **–§–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–∑ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ MeltingPoint/BoilingPoint
   - –ó–∞–ø—Ä–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞ —Ñ–∞–∑ (s ‚Üí g –±–µ–∑ l)

5. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö–∞–∂–¥–∞—è —Å—Ç–∞–¥–∏—è –ø–æ–∏—Å–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è YAML vs –ë–î
   - –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –≤ YAML-–∫—ç—à–µ:**

| –§–æ—Ä–º—É–ª–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ         | –§–∞–∑—ã    | –ò—Å—Ç–æ—á–Ω–∏–∫             |
| ------- | ---------------- | ------- | -------------------- |
| H2O     | –í–æ–¥–∞             | s, l, g | Glushko 94, Barin 93 |
| CO2     | –£–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑   | s, l, g | Glushko 94           |
| CO      | –£–≥–∞—Ä–Ω—ã–π –≥–∞–∑      | g       | Glushko 94           |
| O2      | –ö–∏—Å–ª–æ—Ä–æ–¥         | g       | Glushko 94           |
| NH3     | –ê–º–º–∏–∞–∫           | g       | Glushko 94           |
| Cl2     | –•–ª–æ—Ä             | g       | Glushko 94           |
| HCl     | –•–ª–æ—Ä–æ–≤–æ–¥–æ—Ä–æ–¥     | g       | Glushko 94           |
| NaCl    | –•–ª–æ—Ä–∏–¥ –Ω–∞—Ç—Ä–∏—è    | s, l    | Knacke 91            |
| FeO     | –û–∫—Å–∏–¥ –∂–µ–ª–µ–∑–∞     | s, l    | Barin 93             |
| C       | –£–≥–ª–µ—Ä–æ–¥ (–≥—Ä–∞—Ñ–∏—Ç) | s       | Barin 93             |

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ 5 –º–æ–¥—É–ª–µ–π –≤ `core_logic/`
- ‚úÖ –ö–æ–¥ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ –Ω–æ—É—Ç–±—É–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–æ–≥–∏–∫–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω `StaticDataManager` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –≤ YAML)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ `orchestrator.py` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –Ω–æ–≤—ã–º–∏ –º–æ–¥—É–ª—è–º–∏
- ‚úÖ `uv run main.py --test` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞—Å—á–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ Al‚ÇÇO‚ÇÉ + 3C ‚Üí 2Al + 3CO
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: T, ŒîH, ŒîS, ŒîG, ln(K), K
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ YAML-–∫—ç—à–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [refactoring_stage_02_core_logic.md](refactoring_stage_02_core_logic.md)

---

### –≠—Ç–∞–ø 3: Formatting ‚Äî –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–≤–æ–¥–∞

**–°—Ç–∞—Ç—É—Å:** üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è  
**–°—Ä–æ–∫:** 1 –Ω–µ–¥–µ–ª—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ 2  

**–¶–µ–ª—å:**

–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –∫—Ä–∞—Å–∏–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏:**

```
src/thermo_agents/formatting/
‚îú‚îÄ‚îÄ unified_reaction_formatter.py    # –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —Ä–µ–∞–∫—Ü–∏–π
‚îú‚îÄ‚îÄ compound_info_formatter.py       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—â–µ—Å—Ç–≤–∞—Ö
‚îú‚îÄ‚îÄ table_formatter.py               # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
‚îî‚îÄ‚îÄ interpretation_formatter.py      # –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

1. **–ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - 23 —Ç–æ—á–∫–∏ (298-2500K —Å —à–∞–≥–æ–º 100K)
   - –ö–æ–ª–æ–Ω–∫–∏: T, ŒîH¬∞, ŒîS¬∞, ŒîG¬∞, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
   - –û—Ç–º–µ—Ç–∫–∏ —Ñ–∞–∑–æ–≤—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

2. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—â–µ—Å—Ç–≤–∞—Ö:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ë–î
   - –§–∞–∑–æ–≤—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
   - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Barin, Glushko, Knacke)
   - –ö–ª–∞—Å—Å—ã –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
   - **–û—Ç–º–µ—Ç–∫–∞ –æ YAML-–∫—ç—à–µ** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ)

3. **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - –ê–Ω–∞–ª–∏–∑ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç–∏ (ŒîG > 0 vs ŒîG < 0)
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏–Ω–≤–µ—Ä—Å–∏–∏ (–≥–¥–µ ŒîG = 0)
   - –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö
   - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

4. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ rich:**
   - –¶–≤–µ—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
   - Unicode —Å–∏–º–≤–æ–ª—ã (‚öóÔ∏è, ‚úÖ, ‚ö†Ô∏è, ‚ïê, etc.)
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚öóÔ∏è  –¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–£—Ä–∞–≤–Ω–µ–Ω–∏–µ: Al‚ÇÇO‚ÇÉ + 3C ‚Üí 2Al + 3CO
–î–∏–∞–ø–∞–∑–æ–Ω: 298-2500 K (—à–∞–≥ 100 K)

–î–∞–Ω–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤:
---------------

  Al‚ÇÇO‚ÇÉ ‚Äî Aluminum oxide
    ‚ö° –ò—Å—Ç–æ—á–Ω–∏–∫: YAML-–∫—ç—à (data/static_compounds/Al2O3.yaml)
    –§–∞–∑—ã: g | T_–ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏: 800-6000 K
    –ò—Å—Ç–æ—á–Ω–∏–∫: Glushko 94 (ReliabilityClass: 1)
  
  C ‚Äî Carbon (Graphite)
    üîç –ò—Å—Ç–æ—á–Ω–∏–∫: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–∞–¥–∏—è 1: —Ñ–æ—Ä–º—É–ª–∞ + –∏–º—è)
    –§–∞–∑—ã: s | T_–ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏: 1300-3900 K
    –ò—Å—Ç–æ—á–Ω–∏–∫: Barin 93 (ReliabilityClass: 1)
  
  Al ‚Äî Aluminum
    üîç –ò—Å—Ç–æ—á–Ω–∏–∫: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–∞–¥–∏—è 2: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞)
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π: 2 (s: 1, l: 1)
    –§–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:
      ‚Ä¢ –ü–ª–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ 934 K (s ‚Üí l)

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞:
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ T(K)   ‚îÉ ŒîH¬∞ (–∫–î–∂/–º–æ–ª—å)  ‚îÉ ŒîS¬∞ (–î–∂/(–ö¬∑–º–æ–ª—å))  ‚îÉ ŒîG¬∞ (–∫–î–∂/–º–æ–ª—å)  ‚îÉ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π       ‚îÉ
‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ   298  ‚îÇ      45.23      ‚îÇ       112.45       ‚îÇ      11.74      ‚îÇ –≠–Ω–¥–µ—Ä–≥–æ–Ω–∏—á–µ—Å–∫–∞—è   ‚îÇ
‚îÇ   400  ‚îÇ      44.89      ‚îÇ       113.21       ‚îÇ      -0.39      ‚îÇ                   ‚îÇ
‚îÇ   ...  ‚îÇ      ...        ‚îÇ        ...         ‚îÇ      ...        ‚îÇ ...               ‚îÇ
‚îÇ  2500  ‚îÇ     -15.67      ‚îÇ       120.34       ‚îÇ    -316.52      ‚îÇ –≠–∫–∑–µ—Ä–≥–æ–Ω–∏—á–µ—Å–∫–∞—è   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  üéØ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏–Ω–≤–µ—Ä—Å–∏–∏: ~723 K
     –ü—Ä–∏ T > 723 K —Ä–µ–∞–∫—Ü–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–≥–æ–¥–Ω–æ–π

  ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 1000-2000 K
  ‚ö†Ô∏è –ü—Ä–∏ T < 700 K –Ω–µ–æ–±—Ö–æ–¥–∏–º –∫–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ 4 —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞
- ‚úÖ –í—ã–≤–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—É—é —Ç–∞–±–ª–∏—Ü—É 298-2500K (23 —Ç–æ—á–∫–∏)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö (YAML vs –ë–î)
- ‚úÖ –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `rich` —Å Unicode —Å–∏–º–≤–æ–ª–∞–º–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [refactoring_stage_03_formatting.md](refactoring_stage_03_formatting.md)

---

### –≠—Ç–∞–ø 4: Testing ‚Äî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–°—Ç–∞—Ç—É—Å:** üü° –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è  
**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —ç—Ç–∞–ø–∞ 3  

**–¶–µ–ª—å:**

–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.

**–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:**

1. **Unit-—Ç–µ—Å—Ç—ã** (`tests/unit/core_logic/`):
   - `test_compound_data_loader.py` (YAML-–∫—ç—à + –¥–≤—É—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫)
   - `test_phase_transition_detector.py`
   - `test_record_range_builder.py`
   - `test_thermodynamic_engine.py`
   - `test_reaction_engine.py`

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** (`tests/integration/`):
   - `test_orchestrator_workflow.py`
   - `test_llm_to_calculation_pipeline.py`
   - `test_logging_integration.py`
   - `test_yaml_cache_integration.py` (–ù–û–í–´–ô)

3. **Regression-—Ç–µ—Å—Ç—ã** (`tests/regression/`):
   - `test_notebook_compatibility.py` (—Å–≤–µ—Ä–∫–∞ —Å calc_example.ipynb)
   - –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `reference_data/*.csv`

4. **Performance-—Ç–µ—Å—Ç—ã** (`tests/performance/`):
   - `test_calculation_speed.py`
   - `test_yaml_cache_performance.py` (–ù–û–í–´–ô)
   - `test_database_query_performance.py`

**–¶–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**

- `core_logic/`: ‚â• 90%
- `formatting/`: ‚â• 80%
- `storage/static_data_manager.py`: ‚â• 95%
- `orchestrator.py`: ‚â• 85%

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- ‚úÖ –°–æ–∑–¥–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ Regression-—Ç–µ—Å—Ç—ã —Å–≤–µ—Ä–µ–Ω—ã —Å –Ω–æ—É—Ç–±—É–∫–æ–º
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Code coverage ‚â• 80%
- ‚úÖ Performance-—Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–µ–º–ª–µ–º—É—é —Å–∫–æ—Ä–æ—Å—Ç—å (<5 —Å–µ–∫)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [refactoring_stage_04_testing.md](refactoring_stage_04_testing.md)

---

## –§–∏–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:

```
src/thermo_agents/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ orchestrator.py                  # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ thermodynamic_agent.py           # LLM –ø–∞—Ä—Å–∏–Ω–≥ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ session_logger.py                # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
‚îÇ
‚îú‚îÄ‚îÄ core_logic/                      # ‚Üê –ù–û–í–ê–Ø –î–ò–†–ï–ö–¢–û–†–ò–Ø (–≠—Ç–∞–ø 2)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ compound_data_loader.py      # YAML + –¥–≤—É—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ phase_transition_detector.py
‚îÇ   ‚îú‚îÄ‚îÄ record_range_builder.py
‚îÇ   ‚îú‚îÄ‚îÄ thermodynamic_engine.py
‚îÇ   ‚îî‚îÄ‚îÄ reaction_engine.py
‚îÇ
‚îú‚îÄ‚îÄ search/                          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ database_connector.py
‚îÇ   ‚îú‚îÄ‚îÄ sql_builder.py
‚îÇ   ‚îî‚îÄ‚îÄ compound_searcher.py
‚îÇ
‚îú‚îÄ‚îÄ storage/                         # YAML-–∫—ç—à (–°–û–•–†–ê–ù–ò–¢–¨!)
‚îÇ   ‚îú‚îÄ‚îÄ static_data_manager.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ models/                          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ extraction.py                # ExtractedReactionParameters
‚îÇ   ‚îú‚îÄ‚îÄ search.py                    # DatabaseRecord, SearchResult
‚îÇ   ‚îú‚îÄ‚îÄ static_data.py               # YAMLCompoundData, YAMLPhaseRecord
‚îÇ   ‚îî‚îÄ‚îÄ formatting.py
‚îÇ
‚îú‚îÄ‚îÄ formatting/                      # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–≠—Ç–∞–ø 3)
‚îÇ   ‚îú‚îÄ‚îÄ unified_reaction_formatter.py
‚îÇ   ‚îú‚îÄ‚îÄ compound_info_formatter.py
‚îÇ   ‚îú‚îÄ‚îÄ table_formatter.py
‚îÇ   ‚îî‚îÄ‚îÄ interpretation_formatter.py
‚îÇ
‚îú‚îÄ‚îÄ filtering/                       # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ phase_resolver.py
‚îÇ   ‚îú‚îÄ‚îÄ phase_segment_builder.py
‚îÇ   ‚îî‚îÄ‚îÄ constants.py
‚îÇ
‚îî‚îÄ‚îÄ utils/                           # –£—Ç–∏–ª–∏—Ç—ã
    ‚îî‚îÄ‚îÄ chem_utils.py

data/
‚îî‚îÄ‚îÄ static_compounds/                # YAML-–∫—ç—à (10+ –≤–µ—â–µ—Å—Ç–≤)
    ‚îú‚îÄ‚îÄ H2O.yaml
    ‚îú‚îÄ‚îÄ CO2.yaml
    ‚îú‚îÄ‚îÄ CO.yaml
    ‚îú‚îÄ‚îÄ O2.yaml
    ‚îú‚îÄ‚îÄ NH3.yaml
    ‚îú‚îÄ‚îÄ Cl2.yaml
    ‚îú‚îÄ‚îÄ HCl.yaml
    ‚îú‚îÄ‚îÄ NaCl.yaml
    ‚îú‚îÄ‚îÄ FeO.yaml
    ‚îî‚îÄ‚îÄ C.yaml
```

### –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞:

```
1. User Query
   ‚Üì
2. LLM (thermodynamic_agent.py)
   ‚Üí ExtractedReactionParameters
   ‚Üì
3. CompoundDataLoader (core_logic/)
   ‚îú‚îÄ‚Üí StaticDataManager ‚Üí YAML cache [–ü–†–ò–û–†–ò–¢–ï–¢!]
   ‚îÇ   ‚úÖ H2O, CO2, O2, NH3, Cl2, HCl, NaCl, FeO, C, CO
   ‚îÇ
   ‚îî‚îÄ‚Üí DatabaseConnector ‚Üí SQL search
       ‚îú‚îÄ‚Üí –°–¢–ê–î–ò–Ø 1: —Ñ–æ—Ä–º—É–ª–∞ + –∏–º—è
       ‚îî‚îÄ‚Üí –°–¢–ê–î–ò–Ø 2: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞
   ‚Üì
4. PhaseTransitionDetector
   ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ MeltingPoint/BoilingPoint
   ‚Üì
5. RecordRangeBuilder
   ‚Üí –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Ç–±–æ—Ä–∞ –∑–∞–ø–∏—Å–µ–π
   ‚Üì
6. ThermodynamicEngine
   ‚Üí –†–∞—Å—á–µ—Ç Cp, H, S, G (—Ñ–æ—Ä–º—É–ª—ã –®–æ–º–µ–π—Ç–∞)
   ‚Üì
7. ReactionEngine
   ‚Üí –†–∞—Å—á–µ—Ç ŒîH, ŒîS, ŒîG, K
   ‚Üì
8. UnifiedReactionFormatter
   ‚Üí –¢–∞–±–ª–∏—Ü–∞ + –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
   ‚Üì
9. User Output (—Å –æ—Ç–º–µ—Ç–∫–æ–π YAML-–∫—ç—à–∞)
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ              | –ò—Å—Ç–æ—á–Ω–∏–∫ –ª–æ–≥–∏–∫–∏             |
| -------------------------------- | ----------------------- | --------------------------- |
| `orchestrator.py`                | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ | –£–ø—Ä–æ—â–µ–Ω (—ç—Ç–∞–ø 1)            |
| `core_logic/`                    | –ü–æ–∏—Å–∫, –æ—Ç–±–æ—Ä, —Ä–∞—Å—á–µ—Ç—ã   | calc_example.ipynb (—ç—Ç–∞–ø 2) |
| `storage/static_data_manager.py` | YAML-–∫—ç—à 10+ –≤–µ—â–µ—Å—Ç–≤    | –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ (–°–û–•–†–ê–ù–ï–ù)  |
| `formatting/`                    | –í—ã–≤–æ–¥ + –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è   | –ù–æ–≤—ã–π (—ç—Ç–∞–ø 3)              |
| `thermodynamic_agent.py`         | LLM –ø–∞—Ä—Å–∏–Ω–≥             | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π               |

---

## YAML-–∫—ç—à: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**StaticDataManager** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤ –¥–ª—è:

- ‚ö° **–£—Å–∫–æ—Ä–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞** (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ vs ~100ms –∑–∞–ø—Ä–æ—Å –∫ –ë–î)
- üìä **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö** (–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏)
- üîÑ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏** (Dict cache)
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** (Pydantic models)

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞

| –§–æ—Ä–º—É–ª–∞ | –†—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ  | –ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ | –§–∞–∑—ã    | ReliabilityClass |
| ------- | ----------------- | ------------------- | ------- | ---------------- |
| H2O     | –í–æ–¥–∞              | Water               | s, l, g | 1                |
| CO2     | –£–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑    | Carbon dioxide      | s, l, g | 1                |
| CO      | –£–≥–∞—Ä–Ω—ã–π –≥–∞–∑       | Carbon monoxide     | g       | 1                |
| O2      | –ö–∏—Å–ª–æ—Ä–æ–¥          | Oxygen              | g       | 1                |
| NH3     | –ê–º–º–∏–∞–∫            | Ammonia             | g       | 1                |
| Cl2     | –•–ª–æ—Ä              | Chlorine            | g       | 1                |
| HCl     | –•–ª–æ—Ä–æ–≤–æ–¥–æ—Ä–æ–¥      | Hydrogen chloride   | g       | 1                |
| NaCl    | –•–ª–æ—Ä–∏–¥ –Ω–∞—Ç—Ä–∏—è     | Sodium chloride     | s, l    | 1                |
| FeO     | –û–∫—Å–∏–¥ –∂–µ–ª–µ–∑–∞ (II) | Iron(II) oxide      | s, l    | 1                |
| C       | –£–≥–ª–µ—Ä–æ–¥ (–≥—Ä–∞—Ñ–∏—Ç)  | Carbon (graphite)   | s       | 1                |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ YAML-—Ñ–∞–π–ª–∞

```yaml
# –ü—Ä–∏–º–µ—Ä: H2O.yaml

compound:
  formula: "H2O"
  common_names:
    - "Water"
    - "–í–æ–¥–∞"
    - "Dihydrogen monoxide"
  
  description: "Water - most common chemical compound on Earth"
  
  phases:
    - phase: "s"                    # –¢–≤–µ—Ä–¥–∞—è —Ñ–∞–∑–∞ (–ª–µ–¥)
      tmin: 3.0
      tmax: 273.151
      h298: -285.830002             # –î–∂/–º–æ–ª—å
      s298: 69.949995               # –î–∂/(–º–æ–ª—å¬∑K)
      f1: 30.092                    # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –®–æ–º–µ–π—Ç–∞
      f2: 6.832
      f3: 6.793
      f4: -2.534
      f5: 0.082
      f6: -0.007
      tmelt: 273.15
      tboil: 373.15
      first_name: "Hydrogen oxide"
      reliability_class: 1
      molecular_weight: 18.01528
      db_rowid: 99603               # –°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å –ë–î
    
    - phase: "l"                    # –ñ–∏–¥–∫–∞—è —Ñ–∞–∑–∞
      tmin: 273.151
      tmax: 495.0
      # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
    
    - phase: "g"                    # –ì–∞–∑–æ–æ–±—Ä–∞–∑–Ω–∞—è —Ñ–∞–∑–∞
      tmin: 298.15
      tmax: 6000.0
      # ...
  
  metadata:
    extracted_date: "2025-11-01"
    source: "Glushko 94, Barin 93"
    reliability_class: 1
    extraction_method: "Manual from database"
    notes: "Selected records with highest reliability"
```

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Pydantic)

```python
# models/static_data.py

from pydantic import BaseModel, Field
from typing import List, Optional
from datetime import date

class YAMLPhaseRecord(BaseModel):
    """–û–¥–Ω–∞ —Ñ–∞–∑–æ–≤–∞—è –∑–∞–ø–∏—Å—å –∏–∑ YAML."""
    phase: str
    tmin: float
    tmax: float
    h298: float
    s298: float
    f1: float
    f2: float
    f3: float
    f4: float
    f5: float
    f6: float
    tmelt: Optional[float] = None
    tboil: Optional[float] = None
    first_name: Optional[str] = None
    reliability_class: int = 0
    molecular_weight: Optional[float] = None
    db_rowid: Optional[int] = None

class YAMLCompoundData(BaseModel):
    """–î–∞–Ω–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –∏–∑ YAML."""
    formula: str
    common_names: List[str]
    description: str
    phases: List[YAMLPhaseRecord]
    
    metadata: dict = Field(default_factory=dict)
```

### API StaticDataManager

```python
# storage/static_data_manager.py

class StaticDataManager:
    def __init__(self, data_dir: Optional[Path] = None):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—É—Ç–µ–º –∫ YAML-—Ñ–∞–π–ª–∞–º."""
    
    def is_available(self, formula: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ YAML –¥–ª—è –≤–µ—â–µ—Å—Ç–≤–∞."""
    
    def load_compound(self, formula: str) -> Optional[YAMLCompoundData]:
        """–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ YAML (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)."""
    
    def list_available_compounds(self) -> List[str]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª –≤ YAML."""
    
    def clear_cache(self) -> None:
        """–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –≤ –ø–∞–º—è—Ç–∏."""
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CompoundDataLoader

```python
# core_logic/compound_data_loader.py

class CompoundDataLoader:
    def __init__(
        self,
        db_connector: DatabaseConnector,
        static_manager: StaticDataManager,
        logger: logging.Logger
    ):
        self.db_connector = db_connector
        self.static_manager = static_manager
        self.logger = logger
    
    def get_raw_compound_data(
        self,
        formula: str,
        compound_names: Optional[List[str]] = None
    ) -> pd.DataFrame:
        """
        –¢—Ä–µ—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫:
        –°–¢–ê–î–ò–Ø 0: YAML-–∫—ç—à (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
        –°–¢–ê–î–ò–Ø 1: –ë–î —Å —Ñ–æ—Ä–º—É–ª–æ–π + –∏–º—è
        –°–¢–ê–î–ò–Ø 2: –ë–î —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞
        """
        # –°–¢–ê–î–ò–Ø 0: YAML-–∫—ç—à
        if self.static_manager.is_available(formula):
            self.logger.info(f"‚ö° {formula}: –Ω–∞–π–¥–µ–Ω–æ –≤ YAML-–∫—ç—à–µ")
            yaml_data = self.static_manager.load_compound(formula)
            return self._convert_yaml_to_dataframe(yaml_data)
        
        # –°–¢–ê–î–ò–Ø 1: –ë–î —Å —Ñ–æ—Ä–º—É–ª–æ–π + –∏–º—è
        if compound_names:
            df = self._search_db_with_name(formula, compound_names[0])
            if not df.empty:
                self.logger.info(
                    f"‚úì {formula} (—Å—Ç–∞–¥–∏—è 1: —Ñ–æ—Ä–º—É–ª–∞ + '{compound_names[0]}'): "
                    f"–Ω–∞–π–¥–µ–Ω–æ {len(df)} –∑–∞–ø–∏—Å–µ–π"
                )
                return df
        
        # –°–¢–ê–î–ò–Ø 2: –ë–î —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞
        df = self._search_db_formula_only(formula)
        if not df.empty:
            self.logger.info(
                f"‚úì {formula} (—Å—Ç–∞–¥–∏—è 2: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º—É–ª–∞): –Ω–∞–π–¥–µ–Ω–æ {len(df)} –∑–∞–ø–∏—Å–µ–π"
            )
        else:
            self.logger.warning(f"‚ö† {formula}: –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π (–≤—Å–µ —Å—Ç–∞–¥–∏–∏)")
        
        return df
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç—É–ø–∞:**

| –ú–µ—Ç–æ–¥                    | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π             |
| ------------------------ | ------------- | ----------------------- |
| YAML-–∫—ç—à (–ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø) | ~2-5 –º—Å       | –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ + –ø–∞—Ä—Å–∏–Ω–≥  |
| YAML-–∫—ç—à (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π)     | <1 –º—Å         | –ò–∑ Dict cache           |
| –ë–î (—Å—Ç–∞–¥–∏—è 1)            | ~80-150 –º—Å    | SQL –∑–∞–ø—Ä–æ—Å + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ |
| –ë–î (—Å—Ç–∞–¥–∏—è 2)            | ~100-200 –º—Å   | –ë–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–π –ø–æ–∏—Å–∫     |

**–û–∂–∏–¥–∞–µ–º—ã–π hit rate YAML-–∫—ç—à–∞:**

- H2O: ~40% –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- CO2: ~15%
- O2: ~10%
- –û—Å—Ç–∞–ª—å–Ω—ã–µ 7 –≤–µ—â–µ—Å—Ç–≤: ~15%
- **–ò–¢–û–ì–û: ~80%** –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ YAML

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –≠—Ç–∞–ø 1: Cleanup

**–†–∏—Å–∫:** –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Git tag `backup-before-stage-01`

**–†–∏—Å–∫:** –ü–æ–ª–æ–º–∫–∞ —Ç–µ—Å—Ç–æ–≤  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –≠—Ç–∞–ø 2: Core Logic

**–†–∏—Å–∫:** –†–∞–∑–ª–∏—á–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å –Ω–æ—É—Ç–±—É–∫–æ–º  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Regression-—Ç–µ—Å—Ç—ã —Å –¥–æ–ø—É—Å—Ç–∏–º–æ–π –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é (rtol=1e-3)

**–†–∏—Å–∫:** YAML-–∫—ç—à —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∫–∞ timestamp –≤ metadata + –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö

### –≠—Ç–∞–ø 3: Formatting

**–†–∏—Å–∫:** –î–ª–∏–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –§–ª–∞–≥ `--brief` –¥–ª—è –∫—Ä–∞—Ç–∫–æ–≥–æ –≤—ã–≤–æ–¥–∞

### –≠—Ç–∞–ø 4: Testing

**–†–∏—Å–∫:** –î–æ–ª–≥–∏–µ —Ç–µ—Å—Ç—ã  
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è (`pytest -n auto`)

---

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –≠—Ç–∞–ø                | –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è  | –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è | –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω–∞—è |
| ------------------- | -------------- | ------------ | -------------- |
| –≠—Ç–∞–ø 0 (–ê—É–¥–∏—Ç)      | 2 –¥–Ω—è          | 3 –¥–Ω—è        | 5 –¥–Ω–µ–π         |
| –≠—Ç–∞–ø 1 (Cleanup)    | 3 –¥–Ω—è          | 5 –¥–Ω–µ–π       | 1 –Ω–µ–¥–µ–ª—è       |
| –≠—Ç–∞–ø 2 (Core Logic) | 1 –Ω–µ–¥–µ–ª—è       | 1.5 –Ω–µ–¥–µ–ª–∏   | 2 –Ω–µ–¥–µ–ª–∏       |
| –≠—Ç–∞–ø 3 (Formatting) | 3 –¥–Ω—è          | 1 –Ω–µ–¥–µ–ª—è     | 1.5 –Ω–µ–¥–µ–ª–∏     |
| –≠—Ç–∞–ø 4 (Testing)    | 1 –Ω–µ–¥–µ–ª—è       | 1.5 –Ω–µ–¥–µ–ª–∏   | 2 –Ω–µ–¥–µ–ª–∏       |
| **–ò–¢–û–ì–û**           | **3.5 –Ω–µ–¥–µ–ª–∏** | **5 –Ω–µ–¥–µ–ª—å** | **7 –Ω–µ–¥–µ–ª—å**   |

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏

### –ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 1:

- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `uv run main.py --test` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É
- [ ] –í—Å–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

### –ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 2:

- [ ] –†–∞—Å—á–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] YAML-–∫—ç—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç—Ä–µ—Ö—Å—Ç–∞–¥–∏–π–Ω—ã–π –ø–æ–∏—Å–∫

### –ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 3:

- [ ] –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ 298-2500K –≤—ã–≤–æ–¥–∏—Ç—Å—è
- [ ] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- [ ] –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (YAML vs –ë–î)

### –ü–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 4:

- [ ] Code coverage ‚â• 80%
- [ ] –í—Å–µ regression-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Performance –ø—Ä–∏–µ–º–ª–µ–º—ã–π (<5 —Å–µ–∫ –Ω–∞ —Ä–∞—Å—á–µ—Ç)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —ç—Ç–∞–ø–∞
git checkout -b refactor/stage-XX-name

# Backup –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
git tag backup-before-stage-XX

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
uv run pytest -v

# –ó–∞–ø—É—Å–∫ —Å coverage
uv run pytest --cov=src/thermo_agents --cov-report=html

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
uv run main.py --test

# –û—Ç–∫–∞—Ç –∫ backup
git reset --hard backup-before-stage-XX
```

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [ARCHITECTURE.md](../ARCHITECTURE.md) ‚Äî –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [calc_example.ipynb](../calc_example.ipynb) ‚Äî –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –Ω–æ—É—Ç–±—É–∫ —Å –ª–æ–≥–∏–∫–æ–π
- [refactoring_improvements_and_clarifications.md](refactoring_improvements_and_clarifications.md) ‚Äî –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-02  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.0  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot
