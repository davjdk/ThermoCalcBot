# –≠—Ç–∞–ø 6: –ö–∞—á–µ—Å—Ç–≤–æ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏

## 13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### 13.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Unit —Ç–µ—Å—Ç—ã** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```python
# tests/unit/test_thermo.py
import pytest
from src.domain.thermo import calculate_cp, calculate_enthalpy_change
from src.domain.models import SpeciesRecord

class TestThermodynamicCalculations:
    """–¢–µ—Å—Ç—ã —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤"""
    
    def test_cp_calculation(self):
        """–¢–µ—Å—Ç —Ä–∞—Å—á—ë—Ç–∞ —Ç–µ–ø–ª–æ—ë–º–∫–æ—Å—Ç–∏ –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º"""
        # –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
        result = calculate_cp(T=1000, f1=50, f2=10, f3=0, f4=0, f5=0, f6=0)
        expected = 50 + 10*1000/1000  # 60 –î–∂/(–º–æ–ª—å¬∑–ö)
        assert abs(result - expected) < 0.01
    
    def test_enthalpy_integration(self):
        """–¢–µ—Å—Ç —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —ç–Ω—Ç–∞–ª—å–ø–∏–∏"""
        species = SpeciesRecord(
            formula="H2O", phase="g", tmin=298, tmax=2000,
            H298_kJ_per_mol=-241.8, S298_J_per_molK=188.8,
            f1=33.6, f2=0.0073, f3=0, f4=0, f5=0, f6=0,
            source="test"
        )
        
        result = calculate_enthalpy_change(species, T=1000)
        # –û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        assert abs(result - (-241800 + 24000)) < 1000  # ¬±1 –∫–î–∂/–º–æ–ª—å
```

**Integration —Ç–µ—Å—Ç—ã** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```python
# tests/integration/test_agents.py
import pytest
from src.agents.db_resolver import DBResolverAgent
from src.infrastructure.database.provider import ThermoDBProvider

@pytest.mark.asyncio
class TestAgentIntegration:
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤"""
    
    async def test_db_resolver_integration(self, test_db_provider):
        """–¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞ —Å –ë–î –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º"""
        agent = DBResolverAgent()
        deps = create_test_deps(db_provider=test_db_provider)
        
        result = await agent.run(
            "–ù–∞–π–¥–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è ZrO2",
            deps=deps
        )
        
        assert result.output.formula == "ZrO2"
        assert result.output.phase in ["s", "l", "g"]
        assert result.output.tmin > 0
```

**E2E —Ç–µ—Å—Ç—ã** - –ø–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
```python
# tests/e2e/test_scenarios.py
import pytest
from app.main import create_app

@pytest.mark.asyncio
class TestEndToEndScenarios:
    """End-to-end —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏"""
    
    async def test_zirconia_chlorination_scenario(self, app_with_test_deps):
        """–°—Ü–µ–Ω–∞—Ä–∏–π 1: –•–ª–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Å–∏–¥–∞ —Ü–∏—Ä–∫–æ–Ω–∏—è"""
        
        query = "–í–æ–∑–º–æ–∂–Ω–æ –ª–∏ —Ö–ª–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Å–∏–¥–∞ —Ü–∏—Ä–∫–æ–Ω–∏—è —á–µ—Ç—ã—Ä–µ—Ö—Ö–ª–æ—Ä–∏—Å—Ç—ã–º —É–≥–ª–µ—Ä–æ–¥–æ–º? –ü—Ä–∏ –∫–∞–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –Ω–∞—á–Ω–µ—Ç—Å—è —Ä–µ–∞–∫—Ü–∏—è?"
        
        result = await app_with_test_deps.analyze(query)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        assert result.query_type == "reaction_analysis"
        assert result.reaction_result is not None
        assert "ZrO2" in result.reaction_result.balanced_equation
        assert "CCl4" in result.reaction_result.balanced_equation
        assert result.reaction_result.T_equilibrium > 0
        assert result.reaction_result.confidence > 0.7
        assert "—Ü–∏—Ä–∫–æ–Ω–∏—è" in result.summary_ru.lower()
    
    async def test_titania_chlorination_scenario(self, app_with_test_deps):
        """–°—Ü–µ–Ω–∞—Ä–∏–π 2: –•–ª–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Å–∏–¥–∞ —Ç–∏—Ç–∞–Ω–∞"""
        
        query = "–í–æ–∑–º–æ–∂–Ω–∞ –ª–∏ —Ä–µ–∞–∫—Ü–∏—è –æ–∫—Å–∏–¥–∞ —Ç–∏—Ç–∞–Ω–∞ —Å —Ö–ª–æ—Ä–æ–º –ø—Ä–∏ 700 –≥—Ä–∞–¥—É—Å–∞—Ö –≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–∏ –º–µ—Ç–∞–Ω–∞?"
        
        result = await app_with_test_deps.analyze(query)
        
        assert result.query_type == "reaction_analysis"
        assert result.reaction_result.feasible_at_T is not None
        assert "TiO2" in result.reaction_result.balanced_equation
        assert "700" in result.summary_ru or "973" in result.summary_ru
```

### 13.2 –§–∏–∫—Å—Ç—É—Ä—ã –∏ –º–æ–∫–∏

```python
# tests/fixtures/test_data.py
import pytest
from src.infrastructure.database.provider import ThermoDBProvider
from src.domain.models import SpeciesRecord

@pytest.fixture
def test_species_data():
    """–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤"""
    return [
        SpeciesRecord(
            formula="ZrO2", phase="s", tmin=298, tmax=2000,
            H298_kJ_per_mol=-1097.5, S298_J_per_molK=50.4,
            f1=69.6, f2=7.1, f3=-8.3, f4=0, f5=0, f6=0,
            source="test_data"
        ),
        SpeciesRecord(
            formula="CCl4", phase="g", tmin=298, tmax=1500,
            H298_kJ_per_mol=-95.7, S298_J_per_molK=309.9,
            f1=83.0, f2=0.3, f3=0, f4=0, f5=0, f6=0,
            source="test_data"
        )
    ]

@pytest.fixture
def mock_openrouter_client():
    """–ú–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞ OpenRouter –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤"""
    from unittest.mock import AsyncMock
    
    mock = AsyncMock()
    mock.run.return_value = create_mock_response()
    return mock
```

### 13.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

```python
# tests/conftest.py
import pytest
import tempfile
import sqlite3
from pathlib import Path

@pytest.fixture(scope="session")
def test_database():
    """–°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î"""
    
    with tempfile.NamedTemporaryFile(suffix=".db", delete=False) as f:
        db_path = f.name
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    conn = sqlite3.connect(db_path)
    conn.execute("""
        CREATE TABLE compounds (
            Formula TEXT, Phase TEXT, Tmin REAL, Tmax REAL,
            H298 REAL, S298 REAL,
            f1 REAL, f2 REAL, f3 REAL, f4 REAL, f5 REAL, f6 REAL,
            source TEXT
        )
    """)
    
    # –í—Å—Ç–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    test_compounds = [
        ("ZrO2", "s", 298, 2000, -1097.5, 50.4, 69.6, 7.1, -8.3, 0, 0, 0, "test"),
        ("CCl4", "g", 298, 1500, -95.7, 309.9, 83.0, 0.3, 0, 0, 0, 0, "test"),
        # ... –¥—Ä—É–≥–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    ]
    
    conn.executemany(
        "INSERT INTO compounds VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)", 
        test_compounds
    )
    conn.commit()
    conn.close()
    
    yield db_path
    
    # Cleanup
    Path(db_path).unlink()

@pytest.fixture
def app_with_test_deps(test_database):
    """–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏"""
    from app.dependencies import setup_test_dependencies
    return setup_test_dependencies(db_path=test_database)
```

### 13.4 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

```bash
# .github/workflows/test.yml (–¥–ª—è CI/CD)
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4
    - uses: astral-sh/setup-uv@v1
    - run: uv sync
    - run: uv run pytest tests/ --cov=src/ --cov-report=xml
    - run: uv run mypy src/
    - run: uv run ruff check src/
```

**–õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```powershell
# scripts/quality_check.ps1
Write-Host "–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞..."

# –¢–µ—Å—Ç—ã
Write-Host "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
uv run pytest tests/ -v --cov=src/ --cov-report=term-missing

# –¢–∏–ø–∏–∑–∞—Ü–∏—è  
Write-Host "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤..."
uv run mypy src/

# –õ–∏–Ω—Ç–µ—Ä
Write-Host "‚ú® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞..."
uv run ruff check src/

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
Write-Host "üé® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è..."
uv run black --check src/

Write-Host "‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
```


## 14. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ –∏ –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### 14.1 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫: –ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î**
- **–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ—â–µ—Å—Ç–≤ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã Cp
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: 
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ
  - –Ø–≤–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∫–∞—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**: –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è < 80%

**–†–∏—Å–∫: –í—ã—Å–æ–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Ç–æ–∫–µ–Ω—ã OpenRouter**
- **–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ**: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ LLM API
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
  - Usage limits –Ω–∞ –∞–≥–µ–Ω—Ç–∞—Ö (tool_calls_limit=15)
  - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É–º–Ω–æ–π –æ–±—Ä–µ–∑–∫–æ–π  
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤
  - Fallback –º–æ–¥–µ–ª–∏ (–¥–µ—à—ë–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –¢—Ä–µ–∫–∏–Ω–≥ –∑–∞—Ç—Ä–∞—Ç —á–µ—Ä–µ–∑ Logfire

**–†–∏—Å–∫: –û—à–∏–±–∫–∏ —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è**
- **–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ**: –ù–µ—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ŒîH, ŒîS –ø—Ä–∏ —ç–∫—Å—Ç—Ä–∞–ø–æ–ª—è—Ü–∏–∏
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
  - –§–ª–∞–≥–∏ `in_range` –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
  - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ —ç–∫—Å—Ç—Ä–∞–ø–æ–ª—è—Ü–∏–∏ >50K
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π —Ä–∞–∑—É–º–Ω–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

### 14.2 –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏

**–†–∏—Å–∫: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
- **–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
  - –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
  - Confirmation loops –¥–ª—è –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã—Ö–æ–¥–Ω—ã—Ö —Å—Ö–µ–º Pydantic
- **–ú–µ—Ç—Ä–∏–∫–∏**: Confidence score < 0.7 –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

**–†–∏—Å–∫: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ SQLite –ø—Ä–∏ concurrent –¥–æ—Å—Ç—É–ø–µ**
- **–ü—Ä–æ—è–≤–ª–µ–Ω–∏–µ**: SQLite locked errors –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö  
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
  - Connection pooling —Å retry –ª–æ–≥–∏–∫–æ–π
  - WAL mode –¥–ª—è SQLite
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∞–π–º-–∞—É—Ç–∞–º–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –ë–î

### 14.3 –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

**–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (4-6 –Ω–µ–¥–µ–ª—å)**
```
–ù–µ–¥–µ–ª—è 1-2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (uv, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îú‚îÄ‚îÄ SQLite –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å –±–∞–∑–æ–≤—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenRouter + Logfire
‚îî‚îÄ‚îÄ Pydantic –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

–ù–µ–¥–µ–ª—è 3-4: –ê–≥–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ DB Resolver Agent (–ø–æ–∏—Å–∫ –≤–µ—â–µ—Å—Ç–≤)
‚îú‚îÄ‚îÄ Thermo Calculator Agent (Cp, H, S, G)
‚îú‚îÄ‚îÄ Reactions Analyzer Agent (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞)
‚îî‚îÄ‚îÄ Orchestrator Agent (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)

–ù–µ–¥–µ–ª—è 5-6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îî‚îÄ‚îÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
```

**–≠—Ç–∞–ø 2: –£–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)**
```
‚îú‚îÄ‚îÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Å –≥–∏–ø–æ—Ç–µ–∑–∞–º–∏ –ø–æ–±–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îú‚îÄ‚îÄ –ü–æ–∏—Å–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è (–±–∏—Å–µ–∫—Ü–∏—è)
‚îú‚îÄ‚îÄ –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—ç—à —Å LRU eviction
‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–∑–æ–≤—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚îî‚îÄ‚îÄ –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
```

**–≠—Ç–∞–ø 3: –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å (1-2 –Ω–µ–¥–µ–ª–∏)**
```
‚îú‚îÄ‚îÄ Comprehensive —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (FastAPI) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã
```

### 14.4 –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Pydantic AI**
- **Fallback**: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OpenRouter HTTP API
- **–í—Ä–µ–º—è**: 2-3 –¥–Ω—è –Ω–∞ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: Pydantic –º–æ–¥–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è, –ª–æ–≥–∏–∫–∞ - –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è

**–°—Ü–µ–Ω–∞—Ä–∏–π: –ü—Ä–æ–±–ª–µ–º—ã —Å OpenRouter**
- **Fallback**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä—è–º—ã–µ API OpenAI/Anthropic
- **–í—Ä–µ–º—è**: 1 –¥–µ–Ω—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–¥–µ–ª–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

**–°—Ü–µ–Ω–∞—Ä–∏–π: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å SQLite**
- **Fallback**: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ö–µ–º—ã
- **–í—Ä–µ–º—è**: 3-5 –¥–Ω–µ–π –Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –õ—É—á—à–∞—è concurrent –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 14.5 –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤: >85%
- –¢–æ—á–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤: <5% –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —ç—Ç–∞–ª–æ–Ω–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å: <30 —Å–µ–∫—É–Ω–¥
- Confidence score —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: >0.7

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: >80%
- –°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞: <$0.10
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã: >99%
- –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ –±–∞–π—Ç–∞: <5 —Å–µ–∫—É–Ω–¥

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π: >4/5
- –ü–æ–ª–Ω–æ—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: >4/5  
- –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—é–º–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ: >4/5
