2025-10-11 14:47:05,958 - __main__ - INFO - ThermoSystem initialized
2025-10-11 14:47:05,958 - __main__ - INFO - Initializing agents...
2025-10-11 14:47:06,216 - thermo_agent - INFO - ThermodynamicAgent 'thermo_agent' initialized
2025-10-11 14:47:06,218 - sql_agent - INFO - SQLGenerationAgent 'sql_agent' initialized
2025-10-11 14:47:06,218 - database_agent - INFO - DatabaseAgent 'database_agent' initialized
2025-10-11 14:47:06,220 - results_filtering_agent - INFO - ResultsFilteringAgent 'results_filtering_agent' initialized
2025-10-11 14:47:06,220 - individual_search_agent - INFO - IndividualSearchAgent 'individual_search_agent' initialized
2025-10-11 14:47:06,227 - __main__ - INFO - All agents initialized successfully
2025-10-11 14:47:06,228 - __main__ - INFO - Starting agents...
2025-10-11 14:47:06,228 - thermo_agent - INFO - Agent 'thermo_agent' started listening for messages
2025-10-11 14:47:06,228 - sql_agent - INFO - Agent 'sql_agent' started listening for messages
2025-10-11 14:47:06,229 - database_agent - INFO - Agent 'database_agent' started listening for messages
2025-10-11 14:47:06,229 - results_filtering_agent - INFO - Agent 'results_filtering_agent' started listening for messages
2025-10-11 14:47:06,229 - individual_search_agent - INFO - Agent 'individual_search_agent' started listening for messages
2025-10-11 14:47:07,229 - __main__ - INFO - All agents started
2025-10-11 14:47:28 - INFO - ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-11 14:47:28,339 - thermo_agents_session_20251011_144705 - INFO - ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-11 14:47:28,340 - orchestrator - INFO - DEBUG: Waiting for thermo_agent response, timeout=180s, message_id=c98c13f2-8b99-4844-a7fd-f590a64fdffa
2025-10-11 14:47:28 - INFO - ОПЕРАЦИЯ: [thermo_agent] -> EXTRACT_PARAMETERS [from orchestrator]
2025-10-11 14:47:28,340 - thermo_agents_session_20251011_144705 - INFO - ОПЕРАЦИЯ: [thermo_agent] -> EXTRACT_PARAMETERS [from orchestrator]
2025-10-11 14:47:28,340 - thermo_agent - INFO - Starting parameter extraction for query: При какой температуре провзаимодействует оксид кальция и сульфид железа?...
2025-10-11 14:47:33,597 - openai._base_client - INFO - Retrying request to /chat/completions in 0.494554 seconds
2025-10-11 14:47:35,063 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-11 14:47:38,355 - thermo_agent - ERROR - LLM timeout after 10 seconds, using fallback extraction
2025-10-11 14:47:38,357 - thermo_agent - WARNING - Using fallback extraction for query: При какой температуре провзаимодействует оксид кальция и сульфид железа?...
2025-10-11 14:47:38 - INFO - INFO: EXTRACTION COMPLETE: reaction, 0 compounds
2025-10-11 14:47:38,358 - thermo_agents_session_20251011_144705 - INFO - INFO: EXTRACTION COMPLETE: reaction, 0 compounds
2025-10-11 14:47:38,359 - thermo_agent - INFO - Forwarded to SQL agent: c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:47:38 - INFO - РЕЗУЛЬТАТ: { "intent": "reaction", "compounds_count": 0, "compounds": 0 items, "temperature_k": 298.15, "has_sql_hint": True, ... }
2025-10-11 14:47:38,360 - thermo_agents_session_20251011_144705 - INFO - РЕЗУЛЬТАТ: { "intent": "reaction", "compounds_count": 0, "compounds": 0 items, "temperature_k": 298.15, "has_sql_hint": True, ... }
2025-10-11 14:47:38 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 10019.53ms
2025-10-11 14:47:38,361 - thermo_agents_session_20251011_144705 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 10019.53ms
2025-10-11 14:47:38 - INFO - МАРШРУТ: FROM: orchestrator
2025-10-11 14:47:38,362 - thermo_agents_session_20251011_144705 - INFO - МАРШРУТ: FROM: orchestrator
2025-10-11 14:47:38 - INFO - CORRELATION ID: c98c13f2-8b99-4844-a7fd-f590a64fdffa
2025-10-11 14:47:38,363 - thermo_agents_session_20251011_144705 - INFO - CORRELATION ID: c98c13f2-8b99-4844-a7fd-f590a64fdffa
2025-10-11 14:47:38 - INFO - AGENT STORAGE: 2 entries, 2 pending messages, 6 active sessions
2025-10-11 14:47:38,364 - thermo_agents_session_20251011_144705 - INFO - AGENT STORAGE: 2 entries, 2 pending messages, 6 active sessions
2025-10-11 14:47:38 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:47:38,365 - thermo_agents_session_20251011_144705 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:47:38 - INFO - ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from thermo_agent]
2025-10-11 14:47:38,386 - thermo_agents_session_20251011_144705 - INFO - ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from thermo_agent]
2025-10-11 14:47:38,387 - sql_agent - INFO - Processing SQL hint: Fallback extraction: При какой температуре провзаимодействует оксид кальция и сульфид железа?...
2025-10-11 14:47:38 - INFO - INFO: SQL GENERATION START: Processing message c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:47:38,387 - thermo_agents_session_20251011_144705 - INFO - INFO: SQL GENERATION START: Processing message c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:47:38,388 - sql_agent - INFO - Starting SQL query generation...
2025-10-11 14:47:38,390 - orchestrator - INFO - DEBUG: Received response from thermo_agent: success
2025-10-11 14:47:38 - INFO - INFO: THERMO AGENT RESPONSE: Success with 0 compounds
2025-10-11 14:47:38,390 - thermo_agents_session_20251011_144705 - INFO - INFO: THERMO AGENT RESPONSE: Success with 0 compounds
2025-10-11 14:47:38,866 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-11 14:47:42,992 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-11 14:47:43,015 - sql_agent - INFO - Generated SQL query: SELECT * FROM compounds WHERE (TRIM(Formula) = 'CaO' OR Formula LIKE 'CaO(%' OR TRIM(Formula) = 'FeS' OR Formula LIKE 'FeS(%') LIMIT 100;
2025-10-11 14:47:43 - INFO - INFO: SQL GENERATION COMPLETE: Query length 137
2025-10-11 14:47:43,015 - thermo_agents_session_20251011_144705 - INFO - INFO: SQL GENERATION COMPLETE: Query length 137
2025-10-11 14:47:43,016 - sql_agent - INFO - SQL query cleaned
2025-10-11 14:47:43,016 - sql_agent - INFO - Prepared result data with key: sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:47:43,017 - sql_agent - INFO - Sending SQL query to database agent for execution...
2025-10-11 14:47:43,017 - sql_agent - INFO - SQL query sent to database_agent: 068e436d-f06e-4218-a2a0-6694374ce6d4
2025-10-11 14:47:44 - INFO - ОПЕРАЦИЯ: [database_agent] -> EXECUTE_QUERY [from sql_agent]
2025-10-11 14:47:44,399 - thermo_agents_session_20251011_144705 - INFO - ОПЕРАЦИЯ: [database_agent] -> EXECUTE_QUERY [from sql_agent]
2025-10-11 14:47:44,400 - database_agent - INFO - Executing standard SQL query: SELECT * FROM compounds WHERE (TRIM(Formula) = 'CaO' OR Formula LIKE 'CaO(%' OR TRIM(Formula) = 'FeS' OR Formula LIKE 'FeS(%') LIMIT 100
2025-10-11 14:47:44 - INFO - INFO: DATABASE EXECUTION START: SELECT * FROM compounds WHERE (TRIM(Formula) = 'CaO' OR Formula LIKE 'CaO(%' OR TRIM(Formula) = 'FeS' OR Formula LIKE 'FeS(%') LIMIT 100
2025-10-11 14:47:44,401 - thermo_agents_session_20251011_144705 - INFO - INFO: DATABASE EXECUTION START: SELECT * FROM compounds WHERE (TRIM(Formula) = 'CaO' OR Formula LIKE 'CaO(%' OR TRIM(Formula) = 'FeS' OR Formula LIKE 'FeS(%') LIMIT 100
2025-10-11 14:47:44,484 - database_agent - INFO - SQL executed successfully: 100 rows found
2025-10-11 14:47:44,485 - database_agent - INFO - Applying temperature range filtering: 198.14999999999998-498.15K...
2025-10-11 14:47:44,485 - database_agent - INFO - Temperature filtering: 51 of 100 rows remain
2025-10-11 14:47:44 - INFO - INFO: TEMPERATURE FILTER: Range=198.14999999999998-498.15K, Matched=51, Excluded=49
2025-10-11 14:47:44,485 - thermo_agents_session_20251011_144705 - INFO - INFO: TEMPERATURE FILTER: Range=198.14999999999998-498.15K, Matched=51, Excluded=49
2025-10-11 14:47:44 - INFO - INFO: QUERY RESULTS: 51 rows, columns: 23
2025-10-11 14:47:44,485 - thermo_agents_session_20251011_144705 - INFO - INFO: QUERY RESULTS: 51 rows, columns: 23
2025-10-11 14:47:44,485 - database_agent - INFO - Database result stored with key: db_result_068e436d-f06e-4218-a2a0-6694374ce6d4
2025-10-11 14:47:44,485 - database_agent - INFO - Sending results to filtering agent for analysis...
2025-10-11 14:47:44,485 - database_agent - INFO - Results sent to filtering agent: 8da14072-c441-495c-9ec4-5ebbfe7d6540
2025-10-11 14:47:44,485 - database_agent - INFO - Response sent to sql_agent
2025-10-11 14:47:44 - INFO - РЕЗУЛЬТАТ: { "message_type": "standard", "execution_success": True, "row_count": 51, "result_key": "db_result_068e436d-f06e-4218-a2a0-6694374ce6d4", "filtering_sent": True, ... }
2025-10-11 14:47:44,486 - thermo_agents_session_20251011_144705 - INFO - РЕЗУЛЬТАТ: { "message_type": "standard", "execution_success": True, "row_count": 51, "result_key": "db_result_068e436d-f06e-4218-a2a0-6694374ce6d4", "filtering_sent": True, ... }
2025-10-11 14:47:44 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 86.21ms
2025-10-11 14:47:44,487 - thermo_agents_session_20251011_144705 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 86.21ms
2025-10-11 14:47:44 - INFO - МАРШРУТ: FROM: sql_agent
2025-10-11 14:47:44,487 - thermo_agents_session_20251011_144705 - INFO - МАРШРУТ: FROM: sql_agent
2025-10-11 14:47:44 - INFO - CORRELATION ID: 068e436d-f06e-4218-a2a0-6694374ce6d4
2025-10-11 14:47:44,487 - thermo_agents_session_20251011_144705 - INFO - CORRELATION ID: 068e436d-f06e-4218-a2a0-6694374ce6d4
2025-10-11 14:47:44 - INFO - AGENT STORAGE: 3 entries, 2 pending messages, 6 active sessions
2025-10-11 14:47:44,487 - thermo_agents_session_20251011_144705 - INFO - AGENT STORAGE: 3 entries, 2 pending messages, 6 active sessions
2025-10-11 14:47:44 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:47:44,487 - thermo_agents_session_20251011_144705 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:47:44,489 - sql_agent - INFO - Received database result: success
2025-10-11 14:47:44,489 - sql_agent - INFO - Database execution successful: 51 rows
2025-10-11 14:47:44,489 - sql_agent - INFO - Waiting for filtering agent results...
2025-10-11 14:47:46 - INFO - ОПЕРАЦИЯ: [results_filtering_agent] -> FILTER_RESULTS [from database_agent]
2025-10-11 14:47:46,391 - thermo_agents_session_20251011_144705 - INFO - ОПЕРАЦИЯ: [results_filtering_agent] -> FILTER_RESULTS [from database_agent]
2025-10-11 14:47:46,393 - results_filtering_agent - INFO - Filtering 51 records for 0 compounds
2025-10-11 14:47:46 - INFO - INFO: RESULTS FILTERING START: 51 records, target temp 298.15K
2025-10-11 14:47:46,393 - thermo_agents_session_20251011_144705 - INFO - INFO: RESULTS FILTERING START: 51 records, target temp 298.15K
2025-10-11 14:47:46,394 - results_filtering_agent - INFO - Temperature pre-filtering: 51 records remain
2025-10-11 14:47:50,681 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-11 14:47:55,847 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-11 14:47:57,358 - results_filtering_agent - INFO - Filtering result stored with key: filtered_result_8da14072-c441-495c-9ec4-5ebbfe7d6540
2025-10-11 14:47:57,359 - results_filtering_agent - INFO - No records selected after filtering
2025-10-11 14:47:57 - INFO - INFO: FILTERED RESULTS: No records selected
2025-10-11 14:47:57,359 - thermo_agents_session_20251011_144705 - INFO - INFO: FILTERED RESULTS: No records selected
2025-10-11 14:47:57,360 - results_filtering_agent - INFO - Filtering response sent to sql_agent
2025-10-11 14:47:57 - INFO - РЕЗУЛЬТАТ: { "message_type": "filter_results", "input_records": 51, "temp_filtered_records": 51, "final_records": 0, "result_key": "filtered_result_8da14072-c441-495c-9ec4-5ebbfe7d6540", ... }
2025-10-11 14:47:57,362 - thermo_agents_session_20251011_144705 - INFO - РЕЗУЛЬТАТ: { "message_type": "filter_results", "input_records": 51, "temp_filtered_records": 51, "final_records": 0, "result_key": "filtered_result_8da14072-c441-495c-9ec4-5ebbfe7d6540", ... }
2025-10-11 14:47:57 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 10969.70ms
2025-10-11 14:47:57,362 - thermo_agents_session_20251011_144705 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 10969.70ms
2025-10-11 14:47:57 - INFO - МАРШРУТ: FROM: database_agent
2025-10-11 14:47:57,365 - thermo_agents_session_20251011_144705 - INFO - МАРШРУТ: FROM: database_agent
2025-10-11 14:47:57 - INFO - AGENT STORAGE: 4 entries, 1 pending messages, 6 active sessions
2025-10-11 14:47:57,365 - thermo_agents_session_20251011_144705 - INFO - AGENT STORAGE: 4 entries, 1 pending messages, 6 active sessions
2025-10-11 14:47:57 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:47:57,366 - thermo_agents_session_20251011_144705 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:48:44,670 - sql_agent - WARNING - Filtering agent did not respond in time, using raw database results
2025-10-11 14:48:44,671 - sql_agent - INFO - Storing result with key: sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:48:44,672 - sql_agent - INFO - Result stored successfully
2025-10-11 14:48:44,672 - sql_agent - INFO - Sending response to thermo_agent
2025-10-11 14:48:44 - INFO - INFO: SENDING RESPONSE: To thermo_agent, key=sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:48:44,674 - thermo_agents_session_20251011_144705 - INFO - INFO: SENDING RESPONSE: To thermo_agent, key=sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:48:44,674 - sql_agent - INFO - response sent successfully to thermo_agent
2025-10-11 14:48:44 - INFO - INFO: SQL GENERATED: 136 chars, 13 columns expected
2025-10-11 14:48:44,675 - thermo_agents_session_20251011_144705 - INFO - INFO: SQL GENERATED: 136 chars, 13 columns expected
2025-10-11 14:48:44,676 - sql_agent - INFO - Sending notification to orchestrator
2025-10-11 14:48:44 - INFO - INFO: NOTIFYING ORCHESTRATOR: correlation_id=c98c13f2-8b99-4844-a7fd-f590a64fdffa
2025-10-11 14:48:44,677 - thermo_agents_session_20251011_144705 - INFO - INFO: NOTIFYING ORCHESTRATOR: correlation_id=c98c13f2-8b99-4844-a7fd-f590a64fdffa
2025-10-11 14:48:44,677 - sql_agent - INFO - Orchestrator notification sent successfully
2025-10-11 14:48:44,679 - sql_agent - INFO - Message processing completed successfully
2025-10-11 14:48:44 - INFO - РЕЗУЛЬТАТ: { "message_type": "standard", "sql_query_length": 136, "expected_columns": 13, "result_key": "sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2", "database_execution": True, ... }
2025-10-11 14:48:44,682 - thermo_agents_session_20251011_144705 - INFO - РЕЗУЛЬТАТ: { "message_type": "standard", "sql_query_length": 136, "expected_columns": 13, "result_key": "sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2", "database_execution": True, ... }
2025-10-11 14:48:44 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 66292.35ms
2025-10-11 14:48:44,682 - thermo_agents_session_20251011_144705 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 66292.35ms
2025-10-11 14:48:44 - INFO - МАРШРУТ: FROM: thermo_agent
2025-10-11 14:48:44,683 - thermo_agents_session_20251011_144705 - INFO - МАРШРУТ: FROM: thermo_agent
2025-10-11 14:48:44 - INFO - CORRELATION ID: c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:48:44,683 - thermo_agents_session_20251011_144705 - INFO - CORRELATION ID: c920a9d9-b367-4bfc-a499-387b478ce0b2
2025-10-11 14:48:44 - INFO - AGENT STORAGE: 5 entries, 2 pending messages, 6 active sessions
2025-10-11 14:48:44,683 - thermo_agents_session_20251011_144705 - INFO - AGENT STORAGE: 5 entries, 2 pending messages, 6 active sessions
2025-10-11 14:48:44 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:48:44,683 - thermo_agents_session_20251011_144705 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:48:44,749 - orchestrator - INFO - Received sql_ready from sql_agent: {'result_key': 'sql_result_c920a9d9-b367-4bfc-a499-387b478ce0b2', 'sql_query': "SELECT * FROM compounds WHERE (TRIM(Formula) = 'CaO' OR Formula LIKE 'CaO(%' OR TRIM(Formula) = 'FeS' OR Formula LIKE 'FeS(%') LIMIT 100"}
2025-10-11 14:48:44 - INFO - РЕЗУЛЬТАТ: { "request_id": "orchestrator_request_2188799777664", "status": "success", "compounds_count": 0, "processing_type": "standard_search", "sql_success": True, ... }
2025-10-11 14:48:44,752 - thermo_agents_session_20251011_144705 - INFO - РЕЗУЛЬТАТ: { "request_id": "orchestrator_request_2188799777664", "status": "success", "compounds_count": 0, "processing_type": "standard_search", "sql_success": True, ... }
2025-10-11 14:48:44 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 76410.07ms
2025-10-11 14:48:44,753 - thermo_agents_session_20251011_144705 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 76410.07ms
2025-10-11 14:48:44 - INFO - CORRELATION ID: orch_req_2188799777664
2025-10-11 14:48:44,753 - thermo_agents_session_20251011_144705 - INFO - CORRELATION ID: orch_req_2188799777664
2025-10-11 14:48:44 - INFO - AGENT STORAGE: 5 entries, 1 pending messages, 6 active sessions
2025-10-11 14:48:44,753 - thermo_agents_session_20251011_144705 - INFO - AGENT STORAGE: 5 entries, 1 pending messages, 6 active sessions
2025-10-11 14:48:44 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:48:44,754 - thermo_agents_session_20251011_144705 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-11 14:49:03,621 - __main__ - ERROR - Interactive mode error: 
Traceback (most recent call last):
  File "c:\IDE\repository\agents_for_david\main.py", line 403, in interactive_mode
    user_input = input("Query> ").strip()
                 ^^^^^^^^^^^^^^^^
EOFError
2025-10-11 14:49:03,783 - __main__ - INFO - Stopping agents...
2025-10-11 14:49:03,783 - thermo_agent - INFO - Agent 'thermo_agent' stopped
2025-10-11 14:49:03,784 - sql_agent - INFO - Agent 'sql_agent' stopped
2025-10-11 14:49:03,784 - database_agent - INFO - Agent 'database_agent' stopped
2025-10-11 14:49:03,784 - results_filtering_agent - INFO - Agent 'results_filtering_agent' stopped
2025-10-11 14:49:03,785 - individual_search_agent - INFO - Agent 'individual_search_agent' stopped
2025-10-11 14:49:03,785 - orchestrator - INFO - Shutting down orchestrator
