2025-10-12 00:59:29,041 - __main__ - INFO - ThermoSystem initialized
2025-10-12 00:59:29,041 - __main__ - INFO - Initializing agents...
2025-10-12 00:59:29,363 - thermo_agent - INFO - ThermodynamicAgent 'thermo_agent' initialized
2025-10-12 00:59:29,363 - sql_agent - INFO - SQLGenerationAgent 'sql_agent' initialized
2025-10-12 00:59:29,364 - database_agent - INFO - DatabaseAgent 'database_agent' initialized
2025-10-12 00:59:29,365 - results_filtering_agent - INFO - ResultsFilteringAgent 'results_filtering_agent' initialized
2025-10-12 00:59:29,365 - individual_search_agent - INFO - IndividualSearchAgent 'individual_search_agent' initialized
2025-10-12 00:59:29,369 - __main__ - INFO - All agents initialized successfully
2025-10-12 00:59:29,369 - __main__ - INFO - Starting agents...
2025-10-12 00:59:29,370 - thermo_agent - INFO - Agent 'thermo_agent' started listening for messages
2025-10-12 00:59:29,370 - sql_agent - INFO - Agent 'sql_agent' started listening for messages
2025-10-12 00:59:29,370 - database_agent - INFO - Agent 'database_agent' started listening for messages
2025-10-12 00:59:29,370 - results_filtering_agent - INFO - Agent 'results_filtering_agent' started listening for messages
2025-10-12 00:59:29,370 - individual_search_agent - INFO - Agent 'individual_search_agent' started listening for messages
2025-10-12 00:59:30,376 - __main__ - INFO - All agents started
2025-10-12 00:59:59 - INFO - ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-12 00:59:59,202 - thermo_agents_session_20251012_005929 - INFO - ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-12 00:59:59,204 - orchestrator - INFO - DEBUG: Waiting for thermo_agent response, timeout=180s, message_id=c9f2a017-5730-4b13-90ba-c9429397bbf7
2025-10-12 00:59:59 - INFO - ОПЕРАЦИЯ: [thermo_agent] -> EXTRACT_PARAMETERS [from orchestrator]
2025-10-12 00:59:59,204 - thermo_agents_session_20251012_005929 - INFO - ОПЕРАЦИЯ: [thermo_agent] -> EXTRACT_PARAMETERS [from orchestrator]
2025-10-12 00:59:59,204 - thermo_agent - INFO - Starting parameter extraction for query: При какой температуре провзаимодействует оксид титана с тетрахлоридом углерода?...
2025-10-12 01:00:02,332 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-12 01:00:02,352 - thermo_agent - INFO - Successfully extracted parameters: reaction, compounds: ['TiO2', 'CCl4']
2025-10-12 01:00:02 - INFO - INFO: EXTRACTION COMPLETE: reaction, 2 compounds
2025-10-12 01:00:02,352 - thermo_agents_session_20251012_005929 - INFO - INFO: EXTRACTION COMPLETE: reaction, 2 compounds
2025-10-12 01:00:02,354 - thermo_agent - INFO - Forwarded to Individual Search Agent: 90f22e69-b5e8-4de3-8f97-28ac48c59902
2025-10-12 01:00:02 - INFO - РЕЗУЛЬТАТ: { "intent": "reaction", "compounds_count": 2, "compounds": 2 items, "temperature_k": 298.15, "has_sql_hint": True, ... }
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - РЕЗУЛЬТАТ: { "intent": "reaction", "compounds_count": 2, "compounds": 2 items, "temperature_k": 298.15, "has_sql_hint": True, ... }
2025-10-12 01:00:02 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 3149.92ms
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 3149.92ms
2025-10-12 01:00:02 - INFO - МАРШРУТ: FROM: orchestrator
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - МАРШРУТ: FROM: orchestrator
2025-10-12 01:00:02 - INFO - CORRELATION ID: c9f2a017-5730-4b13-90ba-c9429397bbf7
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - CORRELATION ID: c9f2a017-5730-4b13-90ba-c9429397bbf7
2025-10-12 01:00:02 - INFO - AGENT STORAGE: 2 entries, 2 pending messages, 6 active sessions
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - AGENT STORAGE: 2 entries, 2 pending messages, 6 active sessions
2025-10-12 01:00:02 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-12 01:00:02,354 - thermo_agents_session_20251012_005929 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-12 01:00:02,398 - orchestrator - INFO - DEBUG: Received response from thermo_agent: success
2025-10-12 01:00:02 - INFO - INFO: THERMO AGENT RESPONSE: Success with 2 compounds
2025-10-12 01:00:02,399 - thermo_agents_session_20251012_005929 - INFO - INFO: THERMO AGENT RESPONSE: Success with 2 compounds
2025-10-12 01:00:02,399 - orchestrator - INFO - DEBUG: Waiting for Individual Search Agent, timeout=360s, correlation_id=c9f2a017-5730-4b13-90ba-c9429397bbf7
2025-10-12 01:00:03,206 - individual_search_agent - INFO - Processing search request: 90f22e69-b5e8-4de3-8f97-28ac48c59902 from thermo_agent
2025-10-12 01:00:03 - INFO - INFO: Starting individual search for 2 compounds
2025-10-12 01:00:03,206 - thermo_agents_session_20251012_005929 - INFO - INFO: Starting individual search for 2 compounds
2025-10-12 01:00:03,206 - individual_search_agent - INFO - DEBUG: Starting search for compound: TiO2
2025-10-12 01:00:03,206 - individual_search_agent - INFO - DEBUG: Created search ID: search_TiO2_90f22e69-b5e8-4de3-8f97-28ac48c59902_3fe68b8e
2025-10-12 01:00:03,206 - individual_search_agent - INFO - DEBUG: Sending SQL generation request for compound TiO2
2025-10-12 01:00:03,206 - individual_search_agent - INFO - DEBUG: SQL request sent with message ID: 9968a485-b765-43e4-812d-04605d567642
2025-10-12 01:00:03,206 - individual_search_agent - INFO - DEBUG: Waiting for SQL result for compound TiO2
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Waiting for SQL result for message 9968a485-b765-43e4-812d-04605d567642, timeout=180s
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Starting search for compound: CCl4
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Created search ID: search_CCl4_90f22e69-b5e8-4de3-8f97-28ac48c59902_88b972c0
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Sending SQL generation request for compound CCl4
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: SQL request sent with message ID: 3f7d84aa-a971-42e5-9b54-09eef0b65d48
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Waiting for SQL result for compound CCl4
2025-10-12 01:00:03,207 - individual_search_agent - INFO - DEBUG: Waiting for SQL result for message 3f7d84aa-a971-42e5-9b54-09eef0b65d48, timeout=180s
2025-10-12 01:00:05 - INFO - ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from individual_search_agent]
2025-10-12 01:00:05,213 - thermo_agents_session_20251012_005929 - INFO - ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from individual_search_agent]
2025-10-12 01:00:05,213 - sql_agent - INFO - Processing individual search for compound: TiO2
2025-10-12 01:00:05,213 - sql_agent - INFO - Starting SQL query generation...
2025-10-12 01:00:06,585 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-12 01:00:08,244 - sql_agent - INFO - Generated SQL query: SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' THEN 1 WHEN Phase = 'g' THEN 2 ELSE 3 END, ReliabilityClass ASC LIMIT 100
2025-10-12 01:00:08 - INFO - INFO: SQL GENERATION COMPLETE: Query length 258
2025-10-12 01:00:08,244 - thermo_agents_session_20251012_005929 - INFO - INFO: SQL GENERATION COMPLETE: Query length 258
2025-10-12 01:00:08,244 - sql_agent - INFO - SQL query cleaned
2025-10-12 01:00:08,244 - sql_agent - INFO - Prepared result data with key: sql_result_9968a485-b765-43e4-812d-04605d567642
2025-10-12 01:00:08,244 - sql_agent - INFO - Sending SQL query to database agent for individual execution...
2025-10-12 01:00:08,244 - sql_agent - INFO - SQL query sent to database_agent: 7fbaf276-8711-4f25-8d99-2d01c1404323
2025-10-12 01:00:09 - INFO - ОПЕРАЦИЯ: [database_agent] -> EXECUTE_QUERY [from sql_agent]
2025-10-12 01:00:09,224 - thermo_agents_session_20251012_005929 - INFO - ОПЕРАЦИЯ: [database_agent] -> EXECUTE_QUERY [from sql_agent]
2025-10-12 01:00:09,225 - database_agent - INFO - Executing individual SQL query for compound TiO2: SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' THEN 1 WHEN Phase = 'g' THEN 2 ELSE 3 END, ReliabilityClass ASC LIMIT 100
2025-10-12 01:00:09 - INFO - INFO: DATABASE EXECUTION START: SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' THEN 1 WHEN Phase = 'g' THEN 2 ELSE 3 END, ReliabilityClass ASC LIMIT 100
2025-10-12 01:00:09,226 - thermo_agents_session_20251012_005929 - INFO - INFO: DATABASE EXECUTION START: SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' THEN 1 WHEN Phase = 'g' THEN 2 ELSE 3 END, ReliabilityClass ASC LIMIT 100
2025-10-12 01:00:09,316 - database_agent - INFO - SQL executed successfully: 29 rows found
2025-10-12 01:00:09,316 - database_agent - INFO - Applying temperature range filtering: 200.0-2000.0K...
2025-10-12 01:00:09,317 - database_agent - INFO - Temperature filtering: 29 of 29 rows remain
2025-10-12 01:00:09 - INFO - INFO: TEMPERATURE FILTER: Range=200.0-2000.0K, Matched=29, Excluded=0
2025-10-12 01:00:09,317 - thermo_agents_session_20251012_005929 - INFO - INFO: TEMPERATURE FILTER: Range=200.0-2000.0K, Matched=29, Excluded=0
2025-10-12 01:00:09 - INFO - INFO: QUERY RESULTS: 29 rows, columns: 23
2025-10-12 01:00:09,317 - thermo_agents_session_20251012_005929 - INFO - INFO: QUERY RESULTS: 29 rows, columns: 23
2025-10-12 01:00:09,317 - database_agent - INFO - Database result stored with key: db_result_7fbaf276-8711-4f25-8d99-2d01c1404323
2025-10-12 01:00:09,317 - database_agent - INFO - Sending results to filtering agent for analysis...
2025-10-12 01:00:09,317 - database_agent - INFO - Individual results sent to filtering agent: 1ba68b53-4252-47dc-a5ba-d57305f33ced
2025-10-12 01:00:09,317 - database_agent - INFO - Response sent to sql_agent
2025-10-12 01:00:09 - INFO - РЕЗУЛЬТАТ: { "message_type": "individual", "execution_success": True, "row_count": 29, "result_key": "db_result_7fbaf276-8711-4f25-8d99-2d01c1404323", "filtering_sent": True, ... }
2025-10-12 01:00:09,317 - thermo_agents_session_20251012_005929 - INFO - РЕЗУЛЬТАТ: { "message_type": "individual", "execution_success": True, "row_count": 29, "result_key": "db_result_7fbaf276-8711-4f25-8d99-2d01c1404323", "filtering_sent": True, ... }
2025-10-12 01:00:09 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 92.68ms
2025-10-12 01:00:09,317 - thermo_agents_session_20251012_005929 - INFO - ВРЕМЯ ВЫПОЛНЕНИЯ: 92.68ms
2025-10-12 01:00:09 - INFO - МАРШРУТ: FROM: sql_agent
2025-10-12 01:00:09,318 - thermo_agents_session_20251012_005929 - INFO - МАРШРУТ: FROM: sql_agent
2025-10-12 01:00:09 - INFO - CORRELATION ID: 7fbaf276-8711-4f25-8d99-2d01c1404323
2025-10-12 01:00:09,318 - thermo_agents_session_20251012_005929 - INFO - CORRELATION ID: 7fbaf276-8711-4f25-8d99-2d01c1404323
2025-10-12 01:00:09 - INFO - AGENT STORAGE: 3 entries, 2 pending messages, 6 active sessions
2025-10-12 01:00:09,318 - thermo_agents_session_20251012_005929 - INFO - AGENT STORAGE: 3 entries, 2 pending messages, 6 active sessions
2025-10-12 01:00:09 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-12 01:00:09,318 - thermo_agents_session_20251012_005929 - INFO - ACTIVE AGENTS: thermo_agent, sql_agent, database_agent, results_filtering_agent, individual_search_agent, orchestrator
2025-10-12 01:00:09,319 - sql_agent - INFO - Received database result: success
2025-10-12 01:00:09,319 - sql_agent - INFO - Database execution successful: 29 rows
2025-10-12 01:00:09,319 - sql_agent - INFO - Waiting for filtering agent results...
2025-10-12 01:00:11 - INFO - ОПЕРАЦИЯ: [results_filtering_agent] -> INDIVIDUAL_FILTER [from database_agent]
2025-10-12 01:00:11,217 - thermo_agents_session_20251012_005929 - INFO - ОПЕРАЦИЯ: [results_filtering_agent] -> INDIVIDUAL_FILTER [from database_agent]
2025-10-12 01:00:11,217 - results_filtering_agent - INFO - Individual filtering for compound TiO2: 29 records
2025-10-12 01:00:11 - INFO - INFO: INDIVIDUAL FILTERING START: TiO2, 29 records, target temp 298.15K
2025-10-12 01:00:11,217 - thermo_agents_session_20251012_005929 - INFO - INFO: INDIVIDUAL FILTERING START: TiO2, 29 records, target temp 298.15K
2025-10-12 01:00:11,217 - results_filtering_agent - INFO - Temperature pre-filtering: 29 records remain
2025-10-12 01:00:12,046 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-12 01:00:22,619 - results_filtering_agent - INFO - Filtering result stored with key: filtered_result_1ba68b53-4252-47dc-a5ba-d57305f33ced
2025-10-12 01:00:22,620 - results_filtering_agent - INFO - Filtered results: 2 selected records
2025-10-12 01:00:22,620 - results_filtering_agent - INFO - DEBUG: First record keys: ['Formula', 'Structure', 'FirstName', 'SecondName', 'Phase', 'CAS', 'MeltingPoint', 'BoilingPoint', 'Density', 'Solubility', 'Color', 'H298', 'S298', 'Tmin', 'Tmax', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'ReliabilityClass', 'Reference']
2025-10-12 01:00:22,620 - results_filtering_agent - INFO - DEBUG: First record data: {'Formula': 'TiO2', 'Structure': 'O2Ti', 'FirstName': 'Titanium(IV) oxide', 'SecondName': 'Rutile', 'Phase': 's', 'CAS': '13463-67-7', 'MeltingPoint': 2116.0, 'BoilingPoint': 3000.0, 'Density': 4.23, 'Solubility': 0.0, 'Color': 7, 'H298': -944.7472, 'S298': 50.291677908, 'Tmin': 298.15, 'Tmax': 2143.0, 'f1': 70.194968, 'f2': 7.57304, 'f3': -15.43896, 'f4': -1.522976092048, 'f5': 0.0, 'f6': 0.0, 'ReliabilityClass': 1, 'Reference': 'Barin 93; Saxena 93'}
2025-10-12 01:00:22 - INFO - INFO: FILTERED RESULTS TABLE (2 records):
2025-10-12 01:00:22,620 - thermo_agents_session_20251012_005929 - INFO - INFO: FILTERED RESULTS TABLE (2 records):
2025-10-12 01:00:22 - INFO - INFO: REASONING: From 29 found records, selected 2: solid and gas phases for TiO2 covering temperature range 200-2000K.
2025-10-12 01:00:22,620 - thermo_agents_session_20251012_005929 - INFO - INFO: REASONING: From 29 found records, selected 2: solid and gas phases for TiO2 covering temperature range 200-2000K.
2025-10-12 01:00:22,620 - results_filtering_agent - ERROR - Error processing filtering message 1ba68b53-4252-47dc-a5ba-d57305f33ced: 'SessionLogger' object has no attribute 'format_table'
2025-10-12 01:00:22 - ERROR - ОПЕРАЦИЯ ЗАВЕРШИЛАСЬ С ОШИБКОЙ: ОПЕРАЦИЯ: [results_filtering_agent] -> INDIVIDUAL_FILTER [from database_agent]
2025-10-12 01:00:22,624 - thermo_agents_session_20251012_005929 - ERROR - ОПЕРАЦИЯ ЗАВЕРШИЛАСЬ С ОШИБКОЙ: ОПЕРАЦИЯ: [results_filtering_agent] -> INDIVIDUAL_FILTER [from database_agent]
2025-10-12 01:00:22 - ERROR - ПОЛНЫЕ ВХОДНЫЕ ДАННЫЕ:
2025-10-12 01:00:22,624 - thermo_agents_session_20251012_005929 - ERROR - ПОЛНЫЕ ВХОДНЫЕ ДАННЫЕ:
2025-10-12 01:00:22 - ERROR - {
  "message_type": "individual",
  "compound": "TiO2",
  "input_records": 29,
  "target_temperature": 298.15,
  "phases": [
    "s",
    "g"
  ]
}
2025-10-12 01:00:22,624 - thermo_agents_session_20251012_005929 - ERROR - {
  "message_type": "individual",
  "compound": "TiO2",
  "input_records": 29,
  "target_temperature": 298.15,
  "phases": [
    "s",
    "g"
  ]
}
2025-10-12 01:00:22 - ERROR - ДЕТАЛИ ОШИБКИ:
2025-10-12 01:00:22,625 - thermo_agents_session_20251012_005929 - ERROR - ДЕТАЛИ ОШИБКИ:
2025-10-12 01:00:22 - ERROR - {
  "exception_type": "AttributeError",
  "exception_message": "'SessionLogger' object has no attribute 'format_table'",
  "traceback": [
    "Traceback (most recent call last):\n",
    "  File \"c:\\IDE\\repository\\agents_for_david\\src\\thermo_agents\\results_filtering_agent.py\", line 279, in _process_message\n    self._log_filtered_table(selected_records, filtered_result.filter_summary)\n",
    "  File \"c:\\IDE\\repository\\agents_for_david\\src\\thermo_agents\\results_filtering_agent.py\", line 743, in _log_filtered_table\n    formatted_table = self.config.session_logger.format_table(key_columns, table_rows, max_rows=len(selected_records))\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",
    "AttributeError: 'SessionLogger' object has no attribute 'format_table'\n"
  ]
}
2025-10-12 01:00:22,625 - thermo_agents_session_20251012_005929 - ERROR - {
  "exception_type": "AttributeError",
  "exception_message": "'SessionLogger' object has no attribute 'format_table'",
  "traceback": [
    "Traceback (most recent call last):\n",
    "  File \"c:\\IDE\\repository\\agents_for_david\\src\\thermo_agents\\results_filtering_agent.py\", line 279, in _process_message\n    self._log_filtered_table(selected_records, filtered_result.filter_summary)\n",
    "  File \"c:\\IDE\\repository\\agents_for_david\\src\\thermo_agents\\results_filtering_agent.py\", line 743, in _log_filtered_table\n    formatted_table = self.config.session_logger.format_table(key_columns, table_rows, max_rows=len(selected_records))\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",
    "AttributeError: 'SessionLogger' object has no attribute 'format_table'\n"
  ]
}
2025-10-12 01:00:22 - ERROR - ВРЕМЯ ВЫПОЛНЕНИЯ ДО ОШИБКИ: 11403.59ms
2025-10-12 01:00:22,626 - thermo_agents_session_20251012_005929 - ERROR - ВРЕМЯ ВЫПОЛНЕНИЯ ДО ОШИБКИ: 11403.59ms
2025-10-12 01:00:22 - INFO - МАРШРУТ: FROM: database_agent
2025-10-12 01:00:22,626 - thermo_agents_session_20251012_005929 - INFO - МАРШРУТ: FROM: database_agent
2025-10-12 01:00:22 - INFO - CORRELATION ID: 9968a485-b765-43e4-812d-04605d567642
2025-10-12 01:00:22,626 - thermo_agents_session_20251012_005929 - INFO - CORRELATION ID: 9968a485-b765-43e4-812d-04605d567642
2025-10-12 01:00:22 - ERROR - ПОЛНОЕ СОСТОЯНИЕ ХРАНИЛИЩА НА МОМЕНТ ОШИБКИ:
2025-10-12 01:00:22,626 - thermo_agents_session_20251012_005929 - ERROR - ПОЛНОЕ СОСТОЯНИЕ ХРАНИЛИЩА НА МОМЕНТ ОШИБКИ:
2025-10-12 01:00:22 - ERROR - {
  "timestamp": "2025-10-12T01:00:22.621216",
  "stats": {
    "storage_entries": 4,
    "message_queue_size": 0,
    "message_history_size": 8,
    "active_sessions": 6,
    "agents": [
      "thermo_agent",
      "sql_agent",
      "database_agent",
      "results_filtering_agent",
      "individual_search_agent",
      "orchestrator"
    ]
  },
  "storage_entries": {
    "orchestrator_request_2117920345296": {
      "created_at": "2025-10-12T00:59:59.203920",
      "updated_at": "2025-10-12T00:59:59.203920",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'user_query': 'При какой температуре провзаимодействует оксид титана с тетрахлоридом углерода?', 'request_type': 'thermodynamic', 'options': {}}"
    },
    "thermo_result_c9f2a017-5730-4b13-90ba-c9429397bbf7": {
      "created_at": "2025-10-12T01:00:02.352765",
      "updated_at": "2025-10-12T01:00:02.352765",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'intent': 'reaction', 'compounds': ['TiO2', 'CCl4'], 'temperature_k': 298.15, 'temperature_range_k': [200.0, 2000.0], 'phases': ['s', 'g'], 'properties': ['all'], 'sql_query_hint': 'Find thermodynami"
    },
    "db_result_7fbaf276-8711-4f25-8d99-2d01c1404323": {
      "created_at": "2025-10-12T01:00:09.317250",
      "updated_at": "2025-10-12T01:00:09.317250",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'sql_query': \"SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' "
    },
    "filtered_result_1ba68b53-4252-47dc-a5ba-d57305f33ced": {
      "created_at": "2025-10-12T01:00:22.619041",
      "updated_at": "2025-10-12T01:00:22.619041",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'filtered_result': {'selected_entries': [{'compound': 'TiO2', 'selected_id': 0, 'reasoning': 'Selected record ID=0: solid state (rutile) at 298.15K, temperature range 298.15-2143K covers target tempe"
    }
  },
  "message_queue": [],
  "recent_history": [
    {
      "id": "c9f2a017-5730-4b13-90ba-c9429397bbf7",
      "timestamp": "2025-10-12T00:59:59.204303",
      "source_agent": "orchestrator",
      "target_agent": "thermo_agent",
      "message_type": "extract_parameters",
      "correlation_id": null
    },
    {
      "id": "12cf9977-aa41-4e36-bce9-41c1b64d7c49",
      "timestamp": "2025-10-12T01:00:02.352765",
      "source_agent": "thermo_agent",
      "target_agent": "orchestrator",
      "message_type": "response",
      "correlation_id": "c9f2a017-5730-4b13-90ba-c9429397bbf7"
    },
    {
      "id": "90f22e69-b5e8-4de3-8f97-28ac48c59902",
      "timestamp": "2025-10-12T01:00:02.354219",
      "source_agent": "thermo_agent",
      "target_agent": "individual_search_agent",
      "message_type": "individual_search_request",
      "correlation_id": "c9f2a017-5730-4b13-90ba-c9429397bbf7"
    },
    {
      "id": "9968a485-b765-43e4-812d-04605d567642",
      "timestamp": "2025-10-12T01:00:03.206532",
      "source_agent": "individual_search_agent",
      "target_agent": "sql_agent",
      "message_type": "generate_individual_query",
      "correlation_id": "search_TiO2_90f22e69-b5e8-4de3-8f97-28ac48c59902_3fe68b8e"
    },
    {
      "id": "3f7d84aa-a971-42e5-9b54-09eef0b65d48",
      "timestamp": "2025-10-12T01:00:03.207695",
      "source_agent": "individual_search_agent",
      "target_agent": "sql_agent",
      "message_type": "generate_individual_query",
      "correlation_id": "search_CCl4_90f22e69-b5e8-4de3-8f97-28ac48c59902_88b972c0"
    },
    {
      "id": "7fbaf276-8711-4f25-8d99-2d01c1404323",
      "timestamp": "2025-10-12T01:00:08.244960",
      "source_agent": "sql_agent",
      "target_agent": "database_agent",
      "message_type": "execute_individual_sql",
      "correlation_id": "9968a485-b765-43e4-812d-04605d567642"
    },
    {
      "id": "72218642-3a63-4b5e-bb99-58603f15e823",
      "timestamp": "2025-10-12T01:00:09.317250",
      "source_agent": "database_agent",
      "target_agent": "sql_agent",
      "message_type": "sql_executed",
      "correlation_id": "7fbaf276-8711-4f25-8d99-2d01c1404323"
    },
    {
      "id": "1ba68b53-4252-47dc-a5ba-d57305f33ced",
      "timestamp": "2025-10-12T01:00:09.317250",
      "source_agent": "database_agent",
      "target_agent": "results_filtering_agent",
      "message_type": "filter_individual_results",
      "correlation_id": "9968a485-b765-43e4-812d-04605d567642"
    }
  ],
  "agent_sessions": {
    "thermo_agent": {
      "status": "running",
      "capabilities": [
        "extract_parameters",
        "normalize_formulas",
        "convert_temperature"
      ],
      "metadata": {}
    },
    "sql_agent": {
      "status": "running",
      "capabilities": [
        "generate_sql",
        "execute_query",
        "explain_query"
      ],
      "metadata": {
        "database": "data/thermo_data.db"
      }
    },
    "database_agent": {
      "status": "running",
      "capabilities": [
        "execute_sql",
        "filter_results",
        "query_database"
      ],
      "metadata": {
        "database": "data/thermo_data.db"
      }
    },
    "results_filtering_agent": {
      "status": "running",
      "capabilities": [
        "filter_results",
        "temperature_analysis",
        "compound_selection"
      ],
      "metadata": {}
    },
    "individual_search_agent": {
      "status": "running",
      "capabilities": [
        "coordinate_individual_search",
        "aggregate_results",
        "handle_parallel_searches"
      ],
      "metadata": {}
    },
    "orchestrator": {
      "status": "ready",
      "capabilities": [],
      "metadata": {}
    }
  }
}
2025-10-12 01:00:22,627 - thermo_agents_session_20251012_005929 - ERROR - {
  "timestamp": "2025-10-12T01:00:22.621216",
  "stats": {
    "storage_entries": 4,
    "message_queue_size": 0,
    "message_history_size": 8,
    "active_sessions": 6,
    "agents": [
      "thermo_agent",
      "sql_agent",
      "database_agent",
      "results_filtering_agent",
      "individual_search_agent",
      "orchestrator"
    ]
  },
  "storage_entries": {
    "orchestrator_request_2117920345296": {
      "created_at": "2025-10-12T00:59:59.203920",
      "updated_at": "2025-10-12T00:59:59.203920",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'user_query': 'При какой температуре провзаимодействует оксид титана с тетрахлоридом углерода?', 'request_type': 'thermodynamic', 'options': {}}"
    },
    "thermo_result_c9f2a017-5730-4b13-90ba-c9429397bbf7": {
      "created_at": "2025-10-12T01:00:02.352765",
      "updated_at": "2025-10-12T01:00:02.352765",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'intent': 'reaction', 'compounds': ['TiO2', 'CCl4'], 'temperature_k': 298.15, 'temperature_range_k': [200.0, 2000.0], 'phases': ['s', 'g'], 'properties': ['all'], 'sql_query_hint': 'Find thermodynami"
    },
    "db_result_7fbaf276-8711-4f25-8d99-2d01c1404323": {
      "created_at": "2025-10-12T01:00:09.317250",
      "updated_at": "2025-10-12T01:00:09.317250",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'sql_query': \"SELECT * FROM compounds WHERE (TRIM(Formula) = 'TiO2' OR Formula LIKE 'TiO2(%') AND (Tmin IS NULL OR Tmax IS NULL OR (298.15 >= Tmin AND 298.15 <= Tmax)) ORDER BY CASE WHEN Phase = 's' "
    },
    "filtered_result_1ba68b53-4252-47dc-a5ba-d57305f33ced": {
      "created_at": "2025-10-12T01:00:22.619041",
      "updated_at": "2025-10-12T01:00:22.619041",
      "ttl_seconds": 600,
      "metadata": {},
      "value_type": "dict",
      "value_preview": "{'filtered_result': {'selected_entries': [{'compound': 'TiO2', 'selected_id': 0, 'reasoning': 'Selected record ID=0: solid state (rutile) at 298.15K, temperature range 298.15-2143K covers target tempe"
    }
  },
  "message_queue": [],
  "recent_history": [
    {
      "id": "c9f2a017-5730-4b13-90ba-c9429397bbf7",
      "timestamp": "2025-10-12T00:59:59.204303",
      "source_agent": "orchestrator",
      "target_agent": "thermo_agent",
      "message_type": "extract_parameters",
      "correlation_id": null
    },
    {
      "id": "12cf9977-aa41-4e36-bce9-41c1b64d7c49",
      "timestamp": "2025-10-12T01:00:02.352765",
      "source_agent": "thermo_agent",
      "target_agent": "orchestrator",
      "message_type": "response",
      "correlation_id": "c9f2a017-5730-4b13-90ba-c9429397bbf7"
    },
    {
      "id": "90f22e69-b5e8-4de3-8f97-28ac48c59902",
      "timestamp": "2025-10-12T01:00:02.354219",
      "source_agent": "thermo_agent",
      "target_agent": "individual_search_agent",
      "message_type": "individual_search_request",
      "correlation_id": "c9f2a017-5730-4b13-90ba-c9429397bbf7"
    },
    {
      "id": "9968a485-b765-43e4-812d-04605d567642",
      "timestamp": "2025-10-12T01:00:03.206532",
      "source_agent": "individual_search_agent",
      "target_agent": "sql_agent",
      "message_type": "generate_individual_query",
      "correlation_id": "search_TiO2_90f22e69-b5e8-4de3-8f97-28ac48c59902_3fe68b8e"
    },
    {
      "id": "3f7d84aa-a971-42e5-9b54-09eef0b65d48",
      "timestamp": "2025-10-12T01:00:03.207695",
      "source_agent": "individual_search_agent",
      "target_agent": "sql_agent",
      "message_type": "generate_individual_query",
      "correlation_id": "search_CCl4_90f22e69-b5e8-4de3-8f97-28ac48c59902_88b972c0"
    },
    {
      "id": "7fbaf276-8711-4f25-8d99-2d01c1404323",
      "timestamp": "2025-10-12T01:00:08.244960",
      "source_agent": "sql_agent",
      "target_agent": "database_agent",
      "message_type": "execute_individual_sql",
      "correlation_id": "9968a485-b765-43e4-812d-04605d567642"
    },
    {
      "id": "72218642-3a63-4b5e-bb99-58603f15e823",
      "timestamp": "2025-10-12T01:00:09.317250",
      "source_agent": "database_agent",
      "target_agent": "sql_agent",
      "message_type": "sql_executed",
      "correlation_id": "7fbaf276-8711-4f25-8d99-2d01c1404323"
    },
    {
      "id": "1ba68b53-4252-47dc-a5ba-d57305f33ced",
      "timestamp": "2025-10-12T01:00:09.317250",
      "source_agent": "database_agent",
      "target_agent": "results_filtering_agent",
      "message_type": "filter_individual_results",
      "correlation_id": "9968a485-b765-43e4-812d-04605d567642"
    }
  ],
  "agent_sessions": {
    "thermo_agent": {
      "status": "running",
      "capabilities": [
        "extract_parameters",
        "normalize_formulas",
        "convert_temperature"
      ],
      "metadata": {}
    },
    "sql_agent": {
      "status": "running",
      "capabilities": [
        "generate_sql",
        "execute_query",
        "explain_query"
      ],
      "metadata": {
        "database": "data/thermo_data.db"
      }
    },
    "database_agent": {
      "status": "running",
      "capabilities": [
        "execute_sql",
        "filter_results",
        "query_database"
      ],
      "metadata": {
        "database": "data/thermo_data.db"
      }
    },
    "results_filtering_agent": {
      "status": "running",
      "capabilities": [
        "filter_results",
        "temperature_analysis",
        "compound_selection"
      ],
      "metadata": {}
    },
    "individual_search_agent": {
      "status": "running",
      "capabilities": [
        "coordinate_individual_search",
        "aggregate_results",
        "handle_parallel_searches"
      ],
      "metadata": {}
    },
    "orchestrator": {
      "status": "ready",
      "capabilities": [],
      "metadata": {}
    }
  }
}
2025-10-12 01:00:22 - ERROR - ERROR: FILTERING ERROR: 'SessionLogger' object has no attribute 'format_table'
2025-10-12 01:00:22,628 - thermo_agents_session_20251012_005929 - ERROR - ERROR: FILTERING ERROR: 'SessionLogger' object has no attribute 'format_table'
2025-10-12 01:00:43,888 - __main__ - INFO - Stopping agents...
2025-10-12 01:00:43,889 - thermo_agent - INFO - Agent 'thermo_agent' stopped
2025-10-12 01:00:43,889 - sql_agent - INFO - Agent 'sql_agent' stopped
2025-10-12 01:00:43,889 - database_agent - INFO - Agent 'database_agent' stopped
2025-10-12 01:00:43,889 - results_filtering_agent - INFO - Agent 'results_filtering_agent' stopped
2025-10-12 01:00:43,889 - individual_search_agent - INFO - Agent 'individual_search_agent' stopped
2025-10-12 01:00:43,889 - orchestrator - INFO - Shutting down orchestrator
2025-10-12 01:00:43,890 - __main__ - INFO - All agents stopped
2025-10-12 01:00:43 - INFO - SESSION ENDED
2025-10-12 01:00:43,890 - thermo_agents_session_20251012_005929 - INFO - SESSION ENDED
2025-10-12 01:00:43 - WARNING - Operation cancelled: ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-12 01:00:43,890 - thermo_agents_session_20251012_005929 - WARNING - Operation cancelled: ОПЕРАЦИЯ: [orchestrator] -> PROCESS_REQUEST
2025-10-12 01:00:43 - WARNING - Operation cancelled: ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from individual_search_agent]
2025-10-12 01:00:43,890 - thermo_agents_session_20251012_005929 - WARNING - Operation cancelled: ОПЕРАЦИЯ: [sql_agent] -> GENERATE_QUERY [from individual_search_agent]
